[[PageOutline]]
[[Center(begin)]]
= '''HCLIM 2020 Working Plan Progress''' =
[[LastModified]]
[[Center(end)]]

'''Intended for reporting on progress of changes in HCLIM following the 2020 Working Plan.'''

== HCLIM 2020 working plan ==
[https://docs.google.com/document/d/145HOIHA1Ovv7fYWfU4EvtB6m6OYDqPPbf7gkP7PUTrQ/edit?usp=sharing HCLIM 2020 Working Plan]

== Working Plan Tasks ==

=== Task 1. Interface for GCM forcing | !AnDo ===
* Andreas and Oskar used [https://github.com/doblerone/CMIPtoHCLIM] to prepare GFDL-CM3 boundaries from ESGF for HCLIM (uses nco, cdo & grib_api)
* David has prepared a script ECE2HCLIM_CMIP6.sh to convert EC-Earth to HCLIM, using grib_api and cdo.

* GFDL-CM3 was selected as driving GCM due to a good representation of the current climate and relatively large changes in precipitation & temperature in North Europe together with a strong sea-ice retreat in the Arctic.
* EC-Earth was selected as driving GCM due to a good representation of the current climate and moderate changes in precipitation & temperature in North Europe and good experience with earlier interfaces
* See last slide of https://docs.google.com/presentation/d/1tgOaIS2THDWQN-QzRYxCGu6zI2qTyOACYlRlJ9HI5ZY/edit?usp=sharing for a summary of the GCM selection.


Plans: Andreas will organise a video meeting to coordinate further steps to make more GCM forcing data available and to generalise the approach.

=== Task 2. Formatting NetCDF output according to CORDEX FPS-Convection guidelines | !BeUl ===
==== 1. Collect current initiatives | !BeUl | Not Started ====
David, Andreas and Hylke have all developed their own set of bash or python scripts to modify names and metadata. See if we can make a common package of this. Bert will organise a video meeting to discuss this.
* Andreas used a CCLM cmorize tool: [https://github.com/C2SM-RCM/CCLM2CMOR] -> this may be the cleanest starting point.

==== 2. Implement in convertFA | !BeUl | Not Started ====
Modify convertFA and gl so CORDEX-FPS compliant files and directory structures are produced by HCLIM directly, by default or through a switch.

==== 3. QA checking | !BeUl | Not Started ====
See if QA (https://qa-dkrz.readthedocs.io/en/latest/index.html) can be used on the HCLIM netcdf files.


=== Task 3. Development of cy43 in climate mode | !BeUl ===
==== 1. ~~HCLIM in git~~ | !BeUl | Done 21-02-2012 ====
Make a new repository for HCLIM on the HIRLAM git server linked to the NWP development. HCLIM38 work will stay in subversion, for HCLIM43 and beyond a clone of the Harmonie develop branch was made. Any relevant changes on HCLIM38 will have to be copied manually to HCLIM43 git.

==== 2. Port from HCLIM38h1 | !BeUl, !DaLi, !FuWa | Not Started ====
* Make a list with modifications in HCLIM38h1 that need to be ported
* Copy these manually from svn to the new git repository

==== 3. Port from HCLIM43_SaVi | !BeUl, !DaLi, !FuWa, !SaVi | Not Started ====
Samuel's HCLIM43 git: [https://git.hirlam.org/users/sviana/Harmonie].
* Make a list with modifications in HCLIM43_SaVi (from Samuel) that need to be ported
* Copy these to the new git repository, if possible using git as much as possible.

==== 4. stable HCLIM43 | !BeUl, !DaLi, !FuWa | Not Started ====
Ensures it runs stable on ECWMF:
* several months
* AROME, ALADIN physics (ALARO?)
* with IO-server
* sub-hourly output
* including pre- and postprocessing

Known issues:
* Aerosols are not updated during the simulation. A fix has been committed by Samuel in his user repository (bdab93ab58b051820e8722063fd3ea040dd94ef7), where he uses a new task using BLENDSUR to update aerosol.
* SST_SOURCES: We don't have ECE or SURFEX in util/gl_grib_api/ala/merge_ocean.F90
* ALADIN is not working. Since we are using surfex 8.1 and the code has changed compared to v8.0 so the interface between aladin and surfex must change accordingly. Fuxing is working on this.
* ALARO 0/1 is not working. Don't have info about this. Unknown if it's the same problem as for aladin.
* IO-server might have issues (noted on bi by David)
* NetCDF conversion might have issues (noted on bi by David)

==== 4. HCLIM43 in testbed | !BeUl | Not Started ====
Get HCLIM43 in HARMONIE testbed, so it is tested routinely.


=== Task 4. Testing and evaluation of cy43. | !FuWa ===
Analysis of long-term biases in collaboration with NWP.


=== Task 5. Development of RCAT (Regional Climate Analysis Tool) | !PeLi ===
RCAT on !GitHub: [https://github.com/jplind79/rcat], David is working on the documentation.[[BR]]
David will prepare a miniconda prerequisite file. 


=== Task 6. Greenland and ice sheet modelling | !RaPe ===


=== Task 7. Groundwater and its SURFEX v8 implementation | !JuSa ===


=== Task 8. Coupling to other earth system components (ocean, waves, rivers, ...) | !N/A ===


=== Task 9. Treatment of aerosols & GHGs | !BeUl  ===
Adding more GHG scenarios is urgent, aerosols is less clear.
See also wiki:HarmonieClimate/GHGInHCLIM & wiki:Aerosol.\\
Two presentations on aerosol work in HARMONIE: [http://www.umr-cnrm.fr/aladin/IMG/pdf/martin-perez_asm2018_toulouse.pdf] & [http://www.umr-cnrm.fr/aladin/IMG/pdf/martin_daniel_aemet_asm2019_madrid_3.pdf]

==== 1. hard-coded GHG | !DaLi | Ongoing ====
Extend src/arp/climate/updrgas.F90 to include more CMIP5 and if possible CMIP6 GHG scenarios. Start with rcp4.5.[[BR]]
David is replacing the SRES scenarios with CMIP5 and adding the first CMIP6 scenarios in updrgas.F90. Selection of scenario for AROME/ALADIN via namelist variable NSCEN.

==== 2. Read from external files | !BeUl | Not Started ====
Read GHG scenarios from external text (netcdf?) files. 

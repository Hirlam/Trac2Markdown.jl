[[PageOutline]]
[[Center(begin)]]
= '''Hirlam-C/ALADIN Joint Working Week on GLAMEPS, HarmonEPS, calibration and HARP development for EPS''' =
''FMI, Helsinki. Monday 21 November - Friday 25 November 2016. ''

[[Center(end)]]

[[Image(r20161123_183246.jpg, 20%)]]
[[Image(20161123_134541.jpg, 40%)]]
[[Image(20161124_172641.jpg, 30%)]]
[[Image(20161123_134559.jpg, 30%)]]
[[Image(20161123_134604.jpg, 30%)]]

== Participants ==

 || Name                 || Arriving || Leaving || Working with ||
 || Inger-Lise Frogner   || Monday   || Friday  || HarmonEPS ||
 || Thomas Nipen.        || Monday   || Friday  || Calibration  ||
 || Karoliina Hämäläinen || Monday   || Friday  || Calibration  ||
 || Jose A. Garcia-Moya  || Monday   || Friday  || Calibration/HarmonEPS/HARP ||
 || Alberto Martin       || Monday   || Friday  || HarmonEPS perturbation experiments ||
 || Jesús Rodriguez      || Monday   || Friday  || Calibration ||
 || Ulf Andrae           || Monday   || Friday  || HarmonEPS ||
 || Andrew Singleton     || Tuesday  || Friday  || HarmonEPS, HARP ||
 || Maurice Schmeits     || Monday   || Friday  || Calibration ||
 || John Bjørnar Bremnes || Monday   || Friday  || Calibration ||
 || Sibbo van der Veen   || Monday   || Friday  || Glameps/HarmonEPS ||
 || Henrik Feddersen     || Monday   || Wednesday || HarmonEPS ||
 || Åke Johansson        || Monday   || Friday  || Verification, HARP ||
 || Alfons Callado       || Monday   || Friday  || HarmoneEPS-BCs, SPPT ||
 || Björn Stensen        || Monday   || Wednesday || HarmonEPS ||
 || Ole Vignes           || Monday   || Friday  || HarmonEPS ||
 || Kai Sattler          || Tuesday  || Thursday || GLAMEPS ||
 || Mihály Szűcs         || Monday   || Friday   || SPPT ||
 || Roger Randriamampianina || Monday || Thursday || HarmonEPS - EDA ||

In addition Heikki Hario and Marko Laine is visiting on Tuesday.

== Agenda - now also with updates of work and discussions == 
 * Monday
   * 1300 Welcome
   * Presentations
     * Alfons: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/HarmonEPS_MBCS_SPPT_ww_Helsinky_201611_acalladop_v08.ppt Running HarmonEPS with multi-boundaries and how to activate SPPT in HarmonEPS]
     * Mihály: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/SPPT_SzucsMihaly.pdf SPPT in AROME and ALARO: test results and open questions]
     * Ulf: [https://hirlam.org/trac/raw-attachment/wiki/Meetings/EPS/EPS2016-2/meps_ua_epsww_201611.pdf MetCoOp EPS]
     * Henrik: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/Helsinki_1611.pdf COMEPS - DMI EPS]
     * Jose A.: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/WW-Predict-gSREPS-1116.pptx gSREPS - AEMET EPS]
   * Working session
   * Calibration discussions
     * Plans for the week where made.
 
 * Tuesday
   * 0900: Working session
   * 1000: Presentations: 
     * Marko: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/GLAMEPS_2016-11-22.pdf The EPPES concept for parameter estimation for the ECMWF EPS system]
     * Heikki: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/hh.pdf Evolutionary optimization for EPS model parameters]
     * Sibbo: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/HarmonEPS_microphysics2.ppt Perturbing microphysics in HarmonEPS]
     * Discussion about the possibility of using EPPES in HarmonEPS (Heikki H., Marko L, Heikki J, Ole, Ulf and Inger-Lise)
       * The technical implementation should not be too difficult (it is done in IFS). 
       * Issues for using EPPES in LAM that needs to be considered:
         * Suitable cost function. Z500 or total energy norm as tried in IFS might not be what we want in LAM
         * Will the parameters converge as fast in LAM where not all seasons/weather types are included in the experiment period? Will it converge differently for different seasons? Different parameters could be more important in winter and others in summer?
         * Surface? Include in estimation or not?
         * In IFS it is run from re-analyses - what to do in HarmonEPS?
         * LBCs - should we perturb LBCs or not?
       * Agreed to meet and discuss further and agree on more concrete plans in March when Ulf, Ole and Inger-Lise will visit FMI in connection with MetCoOp working days. We should apply for a special project at ECMWF for this work.
   * 1230-1330 Lunch
   * Andrew and Björn: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/Surface%20perturbations%20in%20HarmonEPS.pdf status of surface perturbations in HarmonEPS]
   * HarmonEPS discussions
    * Surface perturbations:
      * MetCoOp: Andrew and Björn have run one summer and one winter experiment with default surface perturbation code and have analysed the results and found some issues to investigate: Are the perturbations too big, should they look more physically correct than what is the case now? There are large areas with maximum/minimum perturbation values due to clipping. Length scale of 300 km too large?
      * Andrew to contact F. Bouttier to hear his views on planned tests:
        * Reference experiment over MetCoOp domain with branch harmonEPS-40h1.1 (Andrew)
        * Correlation length scale halved (Björn)
        * Reduce large areas of maximum / minimum perturbations by
          * Increase zstd_clip = 4
          * Half all perturbation standard deviations
        * Half perturbation standard deviations (zstd_clip=2)
        * Remove SNOW, LAI, VEG, CV from perturbed parameter list
        * Add perturbations to WGI1, WGI2
          * same pattern as WG1, WG2
          * Standard deviations and clipping values need thinking about
      * DMI: Henrik about to start experiment with default set-up over Danish domain, and has got access to the tools for looking into the results that Andrew made.
      * AEMET - no news
      * KNMI: John de Vries to do this work. Inger-Lise to contact him by email.
    * Output from HarmonEPS as required by the SRNWP EPS project:
      * Ulf has prepared output that is activated by setting  SRNWP_EPS=yes in the config-file (available in branch harmonEPS-40h1.1) and one needs to output history files and PP-files with the same frequency. This output is to be tested in the code developed for post-processing in the SRNWP project (by the Italians), but has so far not been done. 
    * Parameter perturbations: Sibbo presented some first results from perturbing autoconversion (threshold). Need to get a strategy for how to technically do parameter perturbations in HarmonEPS. Re-use existing code for random number generation. How to include stochastic pattern? Will start by using SPPT pattern, then maybe SPG can be used. Ulf and Inger-Lise have started exp perturbing FAC_TWO_COEF in HARATU.
    * SPPT: Mihaly showed in his presentation improvements to the scheme that will be included in HarmonEPS, related to the drying effect (negative humidity and precipitation bias) and a check on supersaturation. With this SPPT behaves reasonably, although work will continue to correct the pattern generator. SPPT to be included in cy40h1.2.
    * SPG (Stochastic pattern generator): Mihaly presented this freely available pattern generator. Could be interesting for HarmonEPS for use in SPPT, surface perturbations and parameter perturbations. It is not straight forward to implement. The easiest is to start by testing it offline, and then use the surface perturbations code for testing for the parameters that only needs the pattern at initial time. Mihaly will continue to work on implementation. 
    * EDA: The reference run with 3h cycling for all 10+1 members with conventional observations, AMSUA, AMSUB and IASI for the MetCoOp domain for 20160530 - 20160615 is finished (Inger-Lise) while the run with EDA (Roger) is still running. A (very) preliminary verification for only two days showed improved scores for EDA up to ~12h. 
   * Working session 
   * HarmonEPS system:
    1. Include BDSTRATEGY to use ENS 4xday, hourly output, from FDB. Implement automatic saving of ENS data for rerunning experiment? Work started (Ulf), but it turns out that the two week rolling archive of hourly ENS data on model levels at ECMWF is not in place yet. We are waiting for feedback from ECMWF user support on this.
    1. Finalize implementation of easier start from spinup- in progress (Ole)
    1. Move variables out of the surface perturbation Fortran code, to ease experimentation - DONE (Ole)
    1. Very slow to get the bd when running HarmonEPS - can it be improved? - no action
    1. Integrate clustering into the code, remove hard coding and make more flexible - no action
    1. sometimes boundary files get corrupted, can it be fixed? - no action
    1. Investigate possible SST problems reported by AEMET. '''Fixed in [15445].'''
 
   
 * Wednesday
  * 0900 Working session
  * 0930 Kai: status of GLAMEPSv3
  * 1000 Video meeting with Alex about GLAMEPS 
    * GLAMEPSv3 has run in parallel since summer. Post-processing is moved from ecgate to hpc, mainly to be able to handle the new, hourly output,
      and has been running stable (still in a separate suite) for one week. 
    * The production time for v2 and v3 are approximately the same. v3 produces 3 times more data than v2. v3 needs approximately a factor 2.7 more SBUs.
    * The CAPE singular vectors are included. It is a complicated part of the suite. As it needs ~40 minutes, it is run in advance on older input data.
    * So far we don't have any scores, but when it has run for some more time this will be produced, probably by the end of November. Then we will have
      the monthly verification running from December. Andrew to do the verification, as for v2. 
    * Alex will look into the possibility to quickly introduce the inflation to the initial perturbations also for Alaro. Effect to first be tested offline. 
    * TODO before v3 can replace v2:
      * post processing to be moved into main suite (Kai)
      * verification - we need to know the quality ... (Andrew)
      * update the user documentation -  started (Kai)
      * ecaccess signals needs to be updated (Kai)
      * Send mail to glameps users mailing list (Kai)
      * test the training part of the calibration. (Kai, calibration group)
      * Introduce calibration of precipitation (Kai, Thomas)
      * some errors reported by KNMI regarding grib-coding (Alex?)
      * Still some issues with the SVs
    * SWITCH from v2 to v3: February should be possible, but not before, as also users need time to adapt to the new GLAMEPS configuration.
    * Staff for maintenance of GLAMEPS: Alex can continue in 2017 (only maintenance, no development). Jeanette to discuss with DMI director and Council chair
      Marianne Thyrring about the possibility for Kai to have some time also in 2017, minimum 1.5pm, to keep GLAMEPS alive while we find a replacement and in the time required
      for transfer of knowledge about GLAMEPS system. 

  * 1200-1300 Lunch
  * Working session
      
 * Thursday
  * 0900: Working session
  * 1200-1300 Lunch
  * Working session

 * Friday
  * 0900 
  * Report from the calibration work this week [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/GLAMEPS_calibration_status_201611.pdf Presentation]
   * Make sure calibration will work in v3: Calibration is included in the suite, however the training is not tested so far.
   * Include more spatial information in the calibration of T2m (possibly also S10m), make operational: In the operational calibration in v2 only model height is used. Look into including land-sea-mask, coordinates and model climate. Currently the spread in points (as seen in the glamepsograms) has almost uniform spread over the forecast time. Including more spatial information should help. During the ww model location (i,j), LSM and MEAN was included (in addition to elevation that was already in), this lead to improvements but there is need for looking mor einto the details. The main focus for the ww was to get the code ready for use. Aim is to get this operational in v3. 
   * Continue work on calibrating precipitation, aim to make it operational in v3: Thomas and Kai working on it, and it is now included in v3, and it is adapted to the hourly output. Need for speed-up.
  * Åke: [https://hirlam.org/trac/attachment/wiki/Meetings/EPS/EPS2016-2/Equally.Likely.pdf A first step to create equally likely ensemble members at the initial time]
  * Summarizing the work this week
  * Feedback of the meeting and working practise
   * We continue with the current working and meeting practise 
  * Suggestions for where and when to meet next time
   * A Doodle will be created in the beginning of 2017.
  * working session
  * 1200: Lunch
 
 
    
== Preparations ==

* Basic working details

  People should bring their own laptop.

* Hotel
We recommend the following hotels because they are easily reachable from Kumpula. It would be better to make the reservation as soon as possible right after summer, because the GLAMEPS week will be placed in the middle of the "Christmas party" season, and many hotels are fully booked. When making hotel reservation, please use code: GLAMEPS to get the rooms with following rates:
 
||Cumulus Kaisaniemi|| 111,00 € per night (single room) || 131,00 € per night (double room)||[https://www.cumulus.fi/en/hotels/cumulus-kaisaniemi-helsinki] ||
||Radisson Blue Plaza Hotel Helsinki|| 165,00 € per night (single room) || 180,00 € per night (double room)||[https://www.radissonblu.com/en/plazahotel-helsinki?facilitator=BIGMOUTHMEDIAREZIDOR] ||

* Helsinki public transportation: [https://www.hsl.fi/en] and we recommend to buy day-ticket [https://www.hsl.fi/en/tickets-and-fares], if you stay a whole week in Helsinki.

== Dinner and Lunch ==
* Dinner on Wednesday evening at 18 o'clock in restaurant Saaga: [http://www.ravintolasaaga.fi/en/]
* Lunch is served at entrance floor in restaurant Tornado: [http://compassgroupfi.episerverhosting.com/Ravintolat/Helsinki/Ravintola-Tornado/Lounaslista-Tornado/] and in basement floors Salad bar Arktis: [http://compassgroupfi.episerverhosting.com/Ravintolat/Helsinki/Ravintola-Tornado/Lounaslista-Arktis/]
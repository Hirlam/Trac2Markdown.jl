[[PageOutline]]
[[Center(begin)]]
== '''HIRLAM 7.0''' ==
[[LastModified]]
[[Center(end)]]

This page contains information about the HIRLAM release 7.0, such as release notes, description of new features, meteorological impacts, information about
the code changes, results of code test and validation, known problems and bug reports, acknowledgment and references.

== Hirlam 7.0 Release Information ==
 * The bug-fix update for 7.0, Hirlam-7.0.1, is released on Nov 8, 2006. See [wiki:ReleaseNotes7.0.1]. The update becomes the default Hirlam release.
 * The official 7.0 release is launched on May 2, 2006. See [wiki:ReleaseNotes7.0]
 * 7.0rc1 is released on Apr 18, 2006. See [wiki:ReleaseNotes7.0rc1]
 * 7.0 beta1 is released on March 9, 2006, See [wiki:ReleaseNotes7.0beta1]

== Source code downloads ==

 * The sandbox (source code checkout with Subversion feature) of the Hirlam 7.0.1, released on Nov 8 ,2006, is available on ECMWF:ecgate as /scratch/ms/dk/nhz/hirlam-7.0.1.tar.gz, or on ECFS: ec:/hirlam/src/tar/hirlam-7.0.1.tar.gz
 * The sandbox (source code checkout with Subversion feature) of the Hirlam 7.0, released on May 2 ,2006, is available on ECMWF:ecgate as /scratch/ms/dk/nhz/hirlam-7.0.tar.gz, or on ECFS: ec:/hirlam/src/tar/hirlam-7.0.tar.gz
 * The check-out of the latest source code version, Hirlam 7.0rc1, released on April 18 ,2006, is available on ECMWF:ecgate as /scratch/ms/dk/nhz/hirlam-7.0rc1.tar.gz, or on ECFS: ec:/hirlam/src/tar/hirlam-7.0rc1.tar.gz
 * A tarball of the latest HIRLAM source code repository, svnroot.tar.gz, is available on ECMWF:ecgate as /scratch/ms/dk/nhz/svnroot.tar.gz which is updated daily at 4 AM UTC.
 * A tarball of the check-out of the latest head version of the HIRLAM source code repository, is available on ECMWF:ecgate at /scratch/ms/dk/nhz/head.tar.gz which is updated daily
 * The check-out version of the source codes of version 7.0beta1, released on March 09,2006, is available on ECMWF/ECFS at ec:/hirlam/src/tar/hirlam7.0beta1.tar.gz

== Main Features of 7.0 ==

HIRLAM 7.0 features updates on following aspects, some of them with meteorological significance:
 * __Coupling method__, featured since Hirlam 6.4.4. A re-forecast procedure is introduced, following similar practices used in DMI, met.no and KNMI. The purpose of the re-forecast is to utilize late-arriving, high quality ECMWF analyses and forecasts in a re-forecast for previous cycle of the HIRLAM synoptic-scale operational system, so as to improve quality of the background fields, especially in terms of representation of large scale features;
 * __Reduced background error scaling__, featured since Hirlam 6.4.2. A reduction of the specified background error statistics so that effectively less weight is given to observation in 3D-VAR minimization;
 * __Assimilation of AMSU-A data__, featured since Hirlam 6.4.4. ATOVS AMSU-A data is assimilated now;
 * __Physics tuning__, featured since Hirlam 6.4.2. Revisions to stomatal resistance and leaf area index;
 * __Revision Control System__, featured since Hirlam 7.0beta1. Subversion is introduced to replace CVS;
 * __Removal of revision control feature in job script__, featured since Hirlam 7.0rc1. Removal of revision control from the reference script set to improve system portability;
 * __Other technical aspects__.
    * A reduction of memory use in semi-lagrangian advection subroutines, introduced in Hirlam 7.0rc1;
   * Relocation of climate generation input data (HDF files) to {{{ec:/hirlam/dat/hdfdb-7.0}}} and the related script change, introduced in Hirlam 7.0rc1;
   * Elimination of race condition in the re-forecast and 4D-VAR scenario, introduced in Hirlam 7.0rc1;
   * Less memory usage for HGS servers, , introduced in Hirlam 7.0rc1;
   * Adjustment to the increased vertical resolution in the ECMWF model, introduced in Hirlam 6.4.4;
   * Updated time correction for individual TEMP station, corrected in Hirlam 6.4.4;
   * Modified postprocessing for PMSL, geopotential, introduced in Hirlam 6.4.3;
   * Improved diagnosis of 2m relative humidity, introduced in Hirlam 6.4.2;;
   * Reference boundary strategy changed from "analysis-only" to "operational", introduced in Hirlam 6.4.4;
 * __non-standard options__.
   * 4DVAR: introduction of lateral boundary control algorithm; a large number of script changes involving configuration, options which enables a wide range of 4D-VAR experiments; 4D-VAR bug corrections, introduced in Hirlam 6.4.4, Hirlam 7.0beta1 and Hirlam 7.0rc1.
   * Assimilation of land SYNOP 10 m wind observation using whitelist, introduced in Hirlam 6.4.4
   * Modification on assimilation of GPS-slant delay data, introduced in Hirlam 6.4.4

== Code Test and Evaluation ==

 * [wiki:TestEvaluation7.0]

== Outstanding problems, bugs ==

 * On ECMWF-ecgate, the start-up compilation sometimes crashes but it normally manages again at more tries. This is believed to be associated with the Fortran compilers at the ECMWF-IBM platforms. The problem appears to be fixed in Hirlam-7.0.1.
 * There is an apparent forecast module reproducibility problem on various aspects. It has been observed the results vary, at various degrees, depending on platform, optimization level, number of PEs, domain decomposition, etc. Users are encouraged to report problems and share experiences on the developers forum dev@hirlam.org. For operational centers, it is highly recommened to perform platform equivalency test between the reference ECMWF-IBM platform and the local super-computer platform, and between various configurations on local platforms. Please also share your results with the community.

== Install and run 7.0 ==

 * At ECMWF, until Dec 1, 2006, an user can use ~nhz/Hirlam to set-up and make experiment. e.g.,
   1. mkdir ~/hl_home/ref
   1. cd ~/hl_home/ref
   1. ~nhz/Hirlam setup -r 7.0
   1. ~nhz/Hirlam start DTG=2006030500
 * On other platforms, first install the HIRLAM source code on a local path $localpath:
{{{
   svn co https://svn.hirlam.org/tags/hirlam-7.0                     # with internet access, or
   svn co file:///$local_repository_path/svnroot/tags/hirlam-7.0     # with local svnroot.tar.gz, or
   tar -zxvf hirlam-7.0.tar.gz; mv hirlam-7.0 7.0                    # with a source code tarball
}}}
    1. alias Hirlam $localpath/hirlam/config-sh/Hirlam
    1. Hirlam setup -r 7.0 -d $localpath
    1. Launch the job with:
{{{
    Hirlam start DTG=$yyyy$mm$dd$hh
}}}
== Install and run 7.0.1 on ECMWF platforms ==

 * The default setting is to use dual host setup, in which ecgate (HOST0) is for launching jobs and simple serial tasks and HPCE (HOST1) is for computations. You can on ecgate, e.g., launch a "exp1" job in following sequence:
{{{
  mkdir ~/hl_home/exp1; cd ~/hl_home/exp1
  ~nhz/Hirlam setup -r 7.0.1
  ~nhz/Hirlam start DTG=2006030500
}}}

 * As an alternative, until Dec 1 2006, you may still used HPCD platform. To launch the dual hosts job on ecgate/HPCD, you can, on ecgate, e.g., launch a "exp1" job in following sequence:
{{{
  mkdir ~/hl_home/exp1; cd ~/hl_home/exp1
  ~nhz/Hirlam setup -r 7.0.1 -h ecgate_hpcd
  ~nhz/Hirlam start DTG=2006030500
}}}
 * Note that if one chooses ecgate_hpcd option, the job submission configuration is submission.ecgate_hpcd.

== Install and run 7.0.1 on non-ECMWF platforms ==

 * On other platforms, you must first download an HDF file set suitable for 7.0. The procedure is described in[https://hirlam.org/trac/wiki/HirlamHowto/Install/General#WhatisanHDFSETandwherecanIfindtheHDFsets  instruction for downloading HDF sets for 7.0]. 

 * Then install the HIRLAM source code on a local path $localpath:
{{{
   svn co https://svn.hirlam.org/tags/hirlam-7.0.1                         # with internet access, or
   svn co file:///$local_repository_path/svnroot/tags/hirlam-7.0.1         # with local svnroot.tar.gz, or
   tar -zxvf hirlam-7.0.1.tar.gz; mv hirlam-7.0.1 7.0.1                    # with a source code tarball
}}}
   1. alias Hirlam $localpath/hirlam/config-sh/Hirlam
   1. Hirlam setup -r 7.0.1 -d $localpath
   1. Launch the job with:
{{{
    Hirlam start DTG=$yyyy$mm$dd$hh
}}}

 * Please see [wiki:HirlamSystemDocumentation/Install/General General requirements for installation] for more details on installation requirements.

----
[[Center(begin)]]
[[Color(red, Last modified on)]] [[LastModified]]
[[Center(end)]]


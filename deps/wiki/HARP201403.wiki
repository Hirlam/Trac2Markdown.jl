[[PageOutline]]
[[Center(begin)]]
= '''HARP Working Week''' =
''RMI, Brussel, 24th - 28th of March 2014''

Last modified [[LastModified]]
[[Center(end)]]

== Practical ==

 The meeting will be held at RMI, Brussel

 External participants

  * DMI:   Kai Sattler, Arrival 12:25 (airport) , Departure: 17:45 (airport),  hotel Best Western County House
  * KNMI:  Emiel van der Plas, Arrival Sunday evening, Departure: 16:52 Bruxelles-midi
  * MET:   Andrew Singleton, Arrival: Mon 10.20 @ airport Departure:  Sunday ,   Hotel: Best Western County House
  * DMI:   Xiaohua Yang, arrival Monday morning 0950 (at the airport), departure 1730 Friday afternoon, hotel Best Western 
  * ZAMG:  Christoph Zingerle, Arrival Mon: 12:20 airport, Departure: Fri: 15:10 airport,   B&B Bio Brussels (next to Best Western)

== Agenda ==

  Start: Monday 24/3 14.00 [[BR]]

  Finish: Friday 28/3 lunchtime

== Topics ==
 * HARP system
  * Status: Andrew presented a experiences and issues with HARP for GLAMEPS, IFS-ENS and HarmonEPS verification (see [https://hirlam.org/trac/attachment/wiki/HARP201403/HARP_ww_topics.pdf attachment]).
    * HARP adapted to extract model data not only in Grib format, but also Felt (MET Norway format), which should be easily adaptable to NetCDF using the same in-house package (miIO)
      * TODO: For existing vfld data, convert ascii to SQLite with python script (Emiel?)
    * Andrew made some modifications to HARP for conditional verification for polar lows with additional (VERY hardcoded) pre-processing software.
  * Work toward a tagged HARP with command line operation, the main goal for this week
    * EPS: (Alex and Andrew) Status: basic framework in place
      * SQLite table design
        * Additional metadata required - parameter units (for both forecasts and obs)
        * Additional data required - number of observations (in the statistical sense) for each threshold
      * R script to convert HIRLAM VOBS to SQLite adapted to also convert vobs version 4 
      * from GLAMEPS V1 and V2 to SQLite, both crontab and real time production procedure in place ('''There is nothing in place for V1''')
        * Available SQLite data set for verification from V1 by Andrew (Oct-Nov 2013, Feb - March 2014) and Alex (??), from V2 covering Oct-Nov 25 2013 (24h - Andrew's scratch),  Feb 2014 (48h - ms_crit), March 2014 (54h - ms_crit)
      * Discussed about specification pn precision level taking referecne to GL fldextr and obsextr
        * Further investigation revealed precision not an issue for filesize - perhaps store some data. e.g. MSLP in Pa, as integers rather than reals
        * Stations outside domain are now removed prior to writing tables --> reduces filesize (could be removed from older files using DELETE and VACUUM but probably not critical)
      * Alex, Andrew updated HARP verification scripts to be able to handle GLAMEPSv2 data. The cleaned scripts are to be committed to Git.
        * In SQLite tables, the member numbering convention for v2 is changed so that all submodel members are numbered 0-6 (or 1-6 for lagged members) rather than using IFS-ENS member number - means all members have the same numbers for all cycles
      * Andrew worked on R-graphic scripts and Shiny scripts for visualisation
      * On Friday, Alex succeeded to apply full HARP scripts to run through a full GLAMEPS (v1 & v2) verification from data preparation to verification and to graphic presentation.
    * Spatial verification (Emiel and Christoph)
      * worked on general script environment (scr, conf) for spatial verification, with verification using radar (OPERA and INCA) data for FSS and SAL scores. Results in SQLite
        * FSS via !SpatialVx package: now depends on R 3.0.3)
        * SAL, predictor method
        * [http://www.cloud-net.org/index.html CloudNet]: vertical netCDF profiles (eg T(t,z))?
      * adapted EPS Shiny interface to display spatial verification scores
      * discussed about verification against analysis (ECMWF deterministic)
      * Ensemble FSS ([http://dx.doi.org/10.3402/tellusa.v65i0.18171 Tellus A 2013, 65, 18171]) - idea suggested. No conclusion on whether spatial team or EPS team will work on implementation....
    * Git repository
      * a [GitShortTutorial short tutorial] provides an overview on working with git
      * worked on use of Git repository and cleared some obstacles.
      * outcome of this weeks work with cleaned scripts can now be committed to Git.
      * working out a workflow concept with following generic steps
        * clone the 'master' branch from the central repo to your local computer
          {{{
             git clone git@hirlam.org:Harp
          }}}
        * move into the Harp directory, create a branch 'mywork', and move to that branch
          {{{
             git branch mywork
             git checkout mywork
          }}}
        * make your code changes, and commit them within your 'mywork' branch
          {{{
             git add .
             git commit -s -m "commit message"
          }}}
        * when done, go to the master branch and update it, it may have changed since your cloning
          {{{
             git checkout master
             git pull
          }}}
        * merge your changes into the master branch
          {{{
             git merge mywork
          }}}
        * CAUTION: you may have to resolve merging conflicts 
        * when merging is finished successfully, you can push your changes to the central repo
          {{{
             git push origin master
          }}}
        * now your changes are available to everybody ion the group
    * Documentation
     * Andrew and Emiel have made some documentation - will be a starting point for full documentation (see [https://hirlam.org/trac/attachment/wiki/HARP201403/HARP_instructions.pdf attachment] for EPS)
 * GLAMEPS
    * HARP application for GLAMEPS V2
    * !WebGraph interface for presentation of standard set of R-graphs (as produced by the R_plotVerification.R) (Xiaohua) 
    * Andrew to start real time extraction of IFS-ENS data to SQLite - to be moved to ms_crit at soonest possible time (Kai?)
    * calibration was discussed - should be done for GLAMEPS but outside HARP's scope.

== Achievements of the week ==
 * SQLite throughout EPS verification; also adapted for results of spatial verification
 * Shiny apps for displaying HARP verification for both EPS and spatial scores were developed and (mostly) debugged
 * A comprehensive HARP script set to be introduced into Git after cleaning
 * Some documentation and instructions to follow
 * Finished extraction of observation and model data in SQlite for GLAMEPS V1 and V2 for the recent periods.


== Remaining tasks ==
 * Add parameter units and number of observations per threshold to SQLite verification tables (Alex)
 * Commit latest HARPeps scripts (including adapted plotting scripts) to Git (Alex) ---> DONE
 * Compute and plot verification scores of GLAMEPSv1 vs GLAMEPSv2 for Feb-Mar 2014 for ASM (Alex; Andrew to provide IFS-ENS scores from MET Norway archive for comparison) ---> DONE
 * Implement extraction of IFS-ENS fields on GLAMEPS domain via MARS in real time (Andrew) ---> Check to merge with Inger-Lise's job
 * Finalise HARPeps Shiny app for displaying EPS scores on hirlam.org (Andrew) ---> DONE - needs some cosmetic work
 * Adapt HARPeps Shiny app for "portable" use (Andrew) ---> DONE
 * Vfld -> SQLite conversion script (Emiel)
 * HARP documentation (EPS - Andrew, Alex; Spatial - Emiel, Christoph)
 * Improve consistency between HARPeps and HARPspatial in the Git repository (Alex, Emiel)
 * !WebGraph interface for presentation of standard set of R-graphs (Xiaohua) ---> DONE
 * Finalise structure and file naming conventions in Git (all)
 * Real time extraction of GLAMEPSv1 to SQLite (ms_crit - Kai? or someone's personal scratch?)
 * Script to run HARP from command line (Alex, Andrew, Emiel) 
 * Merge shiny apps into single app (Andrew, Christoph)


== Reference: previous HARP-related working weeks ==
[[PageOutline]]

[[Center(begin)]]
= '''Harmonie System Documentation''' =
== '''Controlling the namelists in HARMONIE''' ==
[[Center(end)]]

== Introduction ==

IFS is largely driven by namelists and has thousands of options. For each configuration a number of namelists controlling different parts are read. To make the maintenance of the namelists manageable and to assure consistency in terms on e.g. name conventions for fields, packing accuracy, physics settings and parallel options all namelists are generated as they are needed during the run. All the basic settings are defined in a perl dictionary [source:tags/harmonie-37h1.2/nam/harmonie_namelists.pm harmone_namelists.pm] for IFS and [source:tags/harmonie-37h1.2/nam/surfex_namelists.pm surfex_namelists.pm] for SURFEX. The IFS dictionary is structured in several sections:

* Global settings
* Technical settings
 * Host specific settings
 * MPP options
 * File settings

* DYNAMICS SETTINGS
 * Main dynamics switches
 * Non-hydrostatic settings
 * Vertical finite element
 * DFI

* Main physics options. NB! These may contain switches for dynamics as well
 * ALADIN
 * AROME
 * EDMFM switches, to be applied after AROME
 * Alaro
 * Old surface
 * SURFEX
 * DDH

* E927 Interpolation settings
 * Main fullpos settings
 * E927
 * E927 nh
 * SURFEX initial file generation
 * Aladin e927
 * ALARO e927
 * Arome e927

* General postprocessing switches 
 * Default fullpos settings
 * NH postprocessing
 * Switches for postprocessing with surfex
 * Special cases for arome

* Assimilation
 * Canari
  * Arome canari
 * Varbc_rad
 * Varbc_coldstart
 * Screening
  * Arome screening
  * Alaro screening
 * Minimization
   *Alaro minimization
 * 4DVAR 
   * 4DVAR minimization
   * 4DVAR screening
   * 4DVAR trajectory

* Climate generation
 * Climate generations (e923)

* Misc
 * General namelist settings for Tangent-Linear and Adjoint tests 
 * Extra Adjoint test options 
 * Oulan
 * Bator

The final namelists are build through the rules given in [source:tags/harmonie-37h1.2/scr/Get_namelist Get_namelist] and are generated by [source:tags/harmonie-37h1.2/nam/gen_namelists.pl gen_namelists.pl]. Note that in several cases environment variables are still parsed in the scripts.

== Change your namelists ==

There are several ways of changing namelists generated from the dictionary.

* Copy the harmonie_namelist.pm file to your local experiment directory and change the right section like for any source or script modification.

* If you feel uncertain where to change in the dictionary you can copy the actual namelist used in your run. Every namelist used is listed in the logfile so copy it from there and put it under the {{{nam}}} directory in your local experiment. Make sure you give it a unique name. You must then also change the script(s) using this namelist like in the [source:tags/harmonie-37h1.2/scr/Forecast Forecast] script.

{{{
#  Get namelist name
#NAMELIST=$WRK/$WDIR/namelist_forecast
#Get_namelist forecast $NAMELIST
NAMELIST=$HM_LIB/nam/namelist_forecast_with_a_unique_name

}}}

For namelists not present in the dictionary you just copy them to you local {{{nam}}} directory.

There is also a description on how to generate new namelist dictionaries in 
[HarmonieSystemDocumentation/37h1.2/UpdateNamelists here].

[[Center(begin)]]
[wiki:HarmonieSystemDocumentation Back to the main page of the HARMONIE System Documentation]
[[Center(end)]]
----

[[Center(begin)]]
[[Disclaimer]]

[[Color(red, Last modified on)]] [[LastModified]]
[[Center(end)]]
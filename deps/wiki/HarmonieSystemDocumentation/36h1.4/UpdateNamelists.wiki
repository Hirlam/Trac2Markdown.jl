[[PageOutline]]
[[Center(begin)]]
= '''Update the namelist hashes''' =
[[Center(end)]]

== Introduction ==

Each namelists is build from a dictionary of different settings, 
[source:tags/harmonie-36h1.4/nam/harmonie_namelists.pm harmonie_namelists.pm] as the deviation from the default setup.
One section takes care of the general file settings, one of the mpp options 
and the large ones of different configurations. The script 
[source:tags/harmonie-36h1.4/nam/gen_namelists.pl gen_namelists.pl] allows us to build new namelists adding the settings on top of each other.
In the following we describe how to add new namelists and include them in the suite.

== Create a new hash module ==

Let us assume we have some new 4DVAR namelists we would like to merge.
Create a directory and put your new namelists in here. Run the script 
[source:tags/harmonie-36h1.4/nam/Create_hashes.pl Create_hashes.pl]

{{{
./Create_hashes.pl 4dvar
Create namelist hash for 4dvar 
Scan 4dvar/namscreen.dat_4d 
Scan 4dvar/namtraj.1_4d 
Scan 4dvar/namvar.dat_4d 
Create namelist hash 4dvar.pm 
Create updated empty namelist hash empty_4dvar.pm for 4dvar
}}}

We have now created a per module for the new namelists.
The module has to be merged with the conventions in harmonie_namelists.pm, 
but as a start the full namelists can be used. Copy the new empty*.pm to empty.pm to get the updated list of empty namelists.

== Create the new namelist ==

Add the new namelists to the Makefile. Like e.g.

{{{
namelist_traj : empty.pm harmonie_namelists.pm
        ./gen_namelist.pl global namtraj.1_4d > $@
}}}

and elsewhere in the [source:tags/harmonie-36h1.4/nam/Makefile Makefile].

[[Center(begin)]]
[wiki:HarmonieSystemDocumentation Back to the main page of the HARMONIE System Documentation]
[[Center(end)]]
----

[[Center(begin)]]
[[Disclaimer]]

[[Color(red, Last modified on)]] [[LastModified]]
[[Center(end)]]
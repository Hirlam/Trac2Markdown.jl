[[PageOutline]]

[[Center(begin)]]
== '''Hirlam HOWTOs''' ==
= '''General questions about HIRLAM system installation''' =
[[Center(end)]]

== What are the use of all those compiled HIRLAM executibles? ==

If you wonder: out of dozen's of compiled binaries in the $HLDATA/lib/hirlam/bin directory, what's the use of them all and aren't some of them useless? You are not alone. The system group plan to spend some time to make a cleaner version for 7.1 by the later half of this year.

Currently following executibles, a total of 44, are produced when running the latest beta release of HIRLAM syste, 7.1beta1:
{{{
as2pur.x        ctopo_pp_fields.x  fltroro.x    lnps.x       pgb2as.x      tsoil.x
ascii2bufr.x    ctopo.x            hdf2asim.x   mandtg.x     plotstrfun.x  vineta.x
bfrx.x          hdfview.x          mbdstr.x     previ.x      write3DVAR.x
bufrthin.x      diacov.x           hirvda.x     mkbccf.x     putbias.x     write3D.x
calc_alb.x      diffgrib.x         hitmerge7.x  newstrfun.x  sea_ice.x     z0combine.x
checkoptions.x  explnp.x           hlprog.x     nmcstat.x    span.x
cmastat.x       fdvrfy.x           intp.x       obsproc.x    tables30.x
comper.x        finlake.x          landx.x      onetwo.x     tables36.x
}}}

Among them, the following are identified to be necessary in a full HIRLAM data assimilation cycle and rest are auxillatory tools which were developed for diverse special purposes, some of them obsolete.

 1. bfrx.x: Bufr extraction used in the verification procedure
 1. calc_alb.x: Albedo calculation in climate generation
 1. checkoptions.x: A utility to check adequacy of specified experiment parameters when using mini-SMS script system
 1. cmastat.x: A diagnostic tool about HIRLAM 3DVAR analysis statistic file ACMA
 1. ctopo_pp_fields.x: Specific climate generation tool
 1. comper.x: Verification tool
 1. ctopo.x: Aggregation of topographic data in climate generation
 1. explnps.x: Derive ps from lnps
 1. fdvrfy.x: Field verification tool
 1. finlake.x: Include Finnish lake data in surface analysis
 1. hdf2asim.x: HDF to ASIMOF convert in climate generation
 1. hirvda.x: HIRLAM upper air variational analysis
 1. hlprog.x: HIRLAM forecast 
 1. intp.x: Horizontal interpolation of host model analysis and lateral boundary data
 1. lnps.x: Conversion of surface pressure from ps to lnps
 1. mandtg.x: Manage time information from an input string in form of year-month-day-hour
 1. mbdstr.x: Algorithm to find lateral boundary data in case of appling 'available' boundary strategy
 1. obsproc.x: Observation pre-processing tool for upper air analysis to generate from 'raw' observation data to CMA format
 1. onetwo.x: utility in saving of rain rate data for verification procedure
 1. pgb2as.x: Convert from ECMWF GRIB data to HIRLAM ASIMOF GRIB data format
 1. previ.x: Climate file modification for ISBA scheme, used in Climate generation
 1. sea_ice.x: For climate generation (but for what?)
 1. span.x: HIRLAM surface analysis
 1. tsoil.x: Processing of surface/soil fields in climate generation
 1. vineta.x: Vertical interpolation of host model data

For the rest of the executibles, some of them are now obsolete:
 1. as2pur.x: ASIMOF to 'pure' GRIB converter
 1. [wiki:HirlamHowto/Man/ascii2bufr ascii2bufr.x]: used in the [wiki:HirlamHowto/Analysis/ATOVS ATOVS] processing ('''obsolete''')
 1. bufrthin.x: Kristian's HIRVDA tool to extract selective information from BUFR data
 1. diacov.x: Loik Berr's HIRVDA diagnose tool about content of a covariance file
 1. diffgrib.x: Lois Berr's HIRVDA tool to derive difference between two GRIB files
 1. fltroro.x: Gerard's tool to filter orography with Raymond filter (obsolete)
 1. hdfview.x: simple tools to view HDF files (there is better toos for this, e.g., HDFLook)
 1. [wiki:HirlamHowto/Man/hitmerge7 hitmerge7.x]: used in the [wiki:HirlamHowto/Analysis/ATOVS ATOVS] processing
 1. [wiki:HirlamHowto/Man/landx landx.x]: used in the [wiki:HirlamHowto/Analysis/ATOVS ATOVS] processing
 1. [wiki:HirlamHowto/Man/mkbccf mkbccf.x]: used in the [wiki:HirlamHowto/Analysis/ATOVS ATOVS] processing
 1. newstrfun.x: extropolate structure function from one vertical resolution to another
 1. nmcstat.x: derive structure function with NMC method
 1. plotstrfun.x: plot some parameters from structure function data
 1. [wiki:HirlamHowto/Man/putbias putbias.x]: used in the [wiki:HirlamHowto/Analysis/ATOVS ATOVS] processing
 1. tables30.x: derive bufrtables in binary format (obsolete)
 1. tables36.x: derive bufrtables in binary format (obsolete)
 1. write3D.x: Derive vertical coordinate information from AFULL and BFULLs
 1. write3DVAR.x: A tool written for the JB workshop in 2003
 1. z0combine.x: combine vegetation and orographic roughness for pre-ISBA scheme (obsolete)

== What is an HDFSET and where can I find the HDF sets? ==

An HDFSET is a set of files in [http://hdf.ncsa.uiuc.edu/hdf4.html HDF4] format. The files contain the physiographic input data for the Hirlam climate generation. The Hirlam climate generation prepares physiographic data for the Hirlam model and produces climatological surface fields for temperature, soil water etc.

The available HDFSETS for Hirlam-7.0 are

 * gtopo_9000_0.025
 * gtopo_9000_0.0125
 * gtopo_regular_0.025
 * old

The first three sets are described in ''Climate generation developments for high resolution: A technical note on the new HDF sets'' in Hirlam Newsletter, '''45''', pages 134--140. The HDFSET `old` contains the HDF from before Hirlam reference version 6.2.3.

At least one HDFSET is necessary to run the Hirlam climate generation. The HDF file sets are currently not included in Subversion. They are only available from the ECFS data storage at ECMWF, so you need access to the ECMWF computers. The HDF file sets for Hirlam-7.0 are located under `ec:/hirlam/dat/hdfdb-7.0`.

Assume you want to download the HDFSET `gtopo_9000_0.025` for Hirlam-7.0:

 1. Prepare your local computer for the data. You need about 2GB free disk space for the HDF files of `gtopo_9000_0.025`. Let's assume the data is to be put under `foopath`:
{{{
   mkdir -p foopath/dat/hdfdb-7.0
}}}
    Note that the name of this path must be defined by HL_REF_FS and HL_CLDATA in `config-sh/config.<your platform>`.
 1. login in to ecgate and make sure you have about 2GB of free disk space (we assume you are running ksh)
{{{
   cd $SCRATCH
   ~nhk/bin/edrs ec:/hirlam/dat/hdfdb-7.0/gtopo_9000_0.025
}}}
    (`edrs` is part of the EcfsDirectoryTools)
 1. Transfer `gtopo_9000_0.025` to your local computer
{{{
   cd foopath/dat/hdfdb-7.0
   ftp ecaccess.ecmwf.int
   ftp> cd ECSCRATCH
   ftp> cd gtopo_9000_0.025
   ftp> !mkdir gtopo_9000_0.025
   ftp> lcd gtopo_9000_0.025
   ftp> prompt
   ftp> mget *
   ftp> bye
}}}

   The ftp transfer will take some time.
 1. Don't forget to adapt  HL_REF_FS and HL_CLDATA in `config-sh/config.<your platform>`:
{{{
   HL_REF_FS=foopath
   HL_CLDATA=foopath/hl_cldata/dat
}}}
 1. As long as `HL_REF_FS` does not point to a data storage archive, but points to a permanent file system on disk (which is the case in this simple example), then `HL_CLDATA` should be a symbolic link to `HL_REF_FS` in order to avoid double copies of the HDF data:
{{{
   ln -s foopath foopath/hl_cldata/dat
}}}

Now HDFSET `gtopo_9000_0.025` is ready to be accessed by the Hirlam climate generation. The other HDF file sets may be downloaded in a similar way.


[[SubWiki]]

[[Center(begin)]]
[https://hirlam.org/trac/wiki/HirlamHowto Back to the main page of the HIRLAM-HOWTO]
[[Center(end)]]
----
[[Center(begin)]]
[[Disclaimer]]

[[Color(red, Last modified on)]] [[LastModified]]
[[Center(end)]]
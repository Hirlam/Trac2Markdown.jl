[[PageOutline]]
[[Center(begin)]]
= '''Hirlam-A System Managers Meeting''' =
'''26-27 April 2007, met.no, Oslo'''
[[Center(end)]]
== '''A review on actions planned in the [https://hirlam.org/HX/organisation/reports/system_working_week_200610.doc last system meeting in Oct 2006]''' ==
 * Finalizing presentation materials and summary notes from the system workshop. [[Color(red, Status )]]: partially done, see the wiki page [wiki:SystemWorkshop2006 for the workshop]
 * Introduction of autoconf in the reference system. [[Color(red, Status )]]: to be reviewed in this meeting  
 * Optional separation of build and execution in mini-SMS. [[Color(red, Status )]]: to be reviewed in this meeting and done for 7.2
 * Library re-shuffle mainly with a view to avoid circular reference. [[Color(red, Status )]]: to be reviewed in this meeting and done for 7.2
 * New repository structure separating src, data, scripts and changes in script system accordingly; setup of contrib. [[Color(red, Status )]]: to be reviewed in this meeting and done for 7.2
 * Development of web clients for mini-SMS. [[Color(red, Status )]]: Ole has done it; remains to be committed to the repository
 * Script cleaning, such as cleaning up of OI-related options and scripts and removal of other obsolete ones. [[Color(red, Status )]]: mostly done.
 * Preparation of new output stream designed for model inter-comparison. [[Color(red, Status )]]: done.
 * Introduction of the INM utilities to interface external model input to HIRLAM system. [[Color(red, Status )]]: to be taken up with the interoperability project.
 * Switch of HDF4 to HDF5. [[Color(red, Status )]]: to be checked with Han The.
 * Update trac software in hirlam.org. [[Color(red, Status )]]: done.
 * Continued work on reproducibility issues. [[Color(red, Status )]]: ongoing work. see below.
 * externalization of emos2 library and eventually also for IFS, IFSSAUX etc. [[Color(red, Status )]]: to be dealt with with GRIB-API implementation. no action necessary for the latter.
 * Continue pilot study to change the HIRLAM field format to get over ASIMOF format. [[Color(red, Status )]]: see Toons' review in this meeting
 * Security patch updated for the UBUNTU release in the Hirlam.org. [[Color(red, Status )]]: done
 * Validate conjugate gradient minimization scheme and make it a default. [[Color(red, Status )]]: done
 * Retuning of VAR convergence criterion. [[Color(red, Status )]]: DA group work
 * Derivation of bias correction data for AMSU-A with RTTOV-8. [[Color(red, Status )]]: DA/App group work
 * Switching from M1QN3 minimization to CG method. [[Color(red, Status )]]: done
 * Update of stand-alone post-processing for treatment of screen-level quantities and correct time stamp problem. [[Color(red, Status )]]: the issue has been looked at and some easy things have been done, but still incomplete.
 * Overhaul in forecast code. [[Color(red, Status )]]: to be discussed in this meeting
 * Lateral boundary interpolation on the fly instead of pre-prepared (Ulf?). [[Color(red, Status )]]: under development in SMHI 
 * Avoid inconsistent use of upper case and lower case. [[Color(red, Status )]]: to be reviewed in this discussion.
 * Clean up comments; consider witting an template file. [[Color(red, Status )]]: subject of discussion in this meeting
 * More frequent output than per hour. [[Color(red, Status )]]: not done yet, but it is not a system task.
 * Improved documentation [[Color(red, Status )]]: some progresses
 * More post-processing parameters. [[Color(red, Status )]]: done
 * don't remove WD* working directories at failure, but move them to where they&#160;can be found. [[Color(red, Status )]]: done
 * Enabling of model output at isentropic level (Ole) & height level. [[Color(red, Status )]]: template done.
 * Documentation/instruction about name-lists change such as halo zone width, time stepping size etc. in connection with resolution change. [[Color(red, Status )]]: little has been done yet
 * Check of physics options. [[Color(red, Status )]]: no work
 * Avoid hard-coded dimension limit. [[Color(red, Status )]]: not fully done.
 * Insufficient error message in case of crash: one does not understand reason before the problem is fixed [[Color(red, Status )]]: involves efforts in other projects; nothing special has been done.
 * postpp option for output on height-level and isentropic level. [[Color(red, Status )]]: template is made.
== '''Review and discussion''' ==
 * System overhaul 
   * [[Color(blue, Discussed items (Jacob) )]] 
     * code and script modification
     * build
   * [[Color(red, Decision or Conclusions )]]
     * Apply most technical changes in Jacob's overhaul branch, as well as the ''non-controversional'' style changes.
     * Introduce [http://www.gnu.org/software/autoconf/ autoconf] generation of config-files. 
 * HARMONIE system options 
   * [[Color(blue, Discussed items (Mariano) )]]
     * identify pros, cons
     * list of issues to be investigated
       * How does PrepIFS depend on Perforce, Magics, Mars, java, ''etc''.?
       * How portable is PrepIFS to the different environments in the Hirlam countries? (SMHI has experinced problems with porting Mars to their Linux systems.)
       * What about licenses and ease of use for academia? 
     * task and preparation of HARMONIE system meeting in the autumn
   * [[Color(red, Decision or Conclusions )]]
     * more information need to be gathered, preferably with quantitative assessments on various aspects
     * system group will continue to produce list of issues to be considered in the coming months
     * after further discussions and Tomas' fact-finding missions to MF and ECMWF have a final recommendation in a HARMONIE system meeting later in Autumn (tentatively on week 36, at DMI)
 * ASIMOF to ASIMOF GRIB2 to GRIB2; introduction of GRIB API 
   * [[Color(blue, Discussed items (Toon))]]
     * Roadmap, status and plan
       * Approx one week's of work to replace GRIBEX and use GRIB_API calls instead of the current gcod library.
   * [[Color(red, Decision or Conclusions )]]
 * Adjustment of the repository structure 
   * [[Color(blue, Discussed items (Tomas))]]
     * More rapid update of vendor branch by fetching from M-F Clearcase instead of waiting for export tar-files.
     * Collect all source code related directories under `src/` so that it is possible to check out the source code without `data/` and `scripts/`. Suggested new structure:
{{{
trunk/hirlam
        src/    config/
                grdy/
                spdy/
                Makefile

        data/   bufrtables/
                hirvda/
                grads/ (was grads_data)

        scripts/ grads/ (was ../grads_scripts)
                 ppeps/
}}}                   
   * [[Color(red, Decision or Conclusions )]]
     * Implement the new structure after the merge of newsnow and rttov8 branches to trunk is complete. 

 * HIRLAM to MARS option  
   * [[Color(blue, Discussed items (Ulf) )]]
     * Problem with multilevel surface types which are not take care of in MARS
     * The experiment name needs to be uniquely definded
   * [[Color(red, Decision or Conclusions )]]
     * At SMHI we are working with:
        * Adaption to handle leveltype 105 as a multilevel
        * Create a experiment name generator/database
	* Determine how the CLASS/TYPE/STREAM defined in MARS should be used
     * Unclear if ECMWF expects HIRLAM to totally adapt to MARS or if they are willing to change as well
 * 7.2 script
   * [[Color(blue, Discussed items (Xiaohua))]]
     * modifications to master scripts HIRLAM, main
     * documentation/instruction on each reference scripts on wiki page
     * inclusion of weblinks for instructions in the scripts
     * extension of the mini-SMS scripts for operational usage
     * GRIB-> MARS option in the script
     * testing of retrieval of ECMWF data on rotated coordinate
     * testing of BC data from MARS archive
     * issues of climate generation
   * [[Color(red, Decision or Conclusions )]]
     * consider a 'Hirlam make' and 'Hirlam run' script (Tomas)
     * start working on template for reference scripts in which purpose, data flow, and tunables etc are explained on wiki page and linked in the script (Xiaohua, Tomas, Toon, Ole, Kalle)
     * GRIB-> Mars option will not be feature in 7.2, awaiting the MARS adjustment for supporting HIRLAM-kind surface parameters
     * Check with ECMWF to confirm whether the coordinate rotation applied to dissemination project has been implemented for MARS archive (Xiaohua)
     * BC data option at ECMWF need to be checked compared to OPR data 
     * explore optimization of the climate aggregation in order to make especially the band-pass filter faster. Jacob will look into optimization possibilities.
 * code reproducibility, platform portability, optimisation issue 
   * [[Color(blue, Discussed items (Niko))]] see attached [https://hirlam.org/trac/attachment/wiki/SystemWorkingmeeting200704/asm07.ppt asm07.ppt]
    * reproducibility in general, HLPROG and HIRVDA specifics
    * lacking HLPROG re-start functionality
    * portability in general
    * industry standard GNU configure/make build system and compact documentation
    * performance, scaling, parallel efficiency
    * some inconsistencies, especially in postpp
    * unexplained HLPROG crashes on the reference platform (ECMWF IBM) 
   * [[Color(red, Decision or Conclusions )]]
    * in most cases reproducibility is not checked (against the reference platform) when doing local operational implementations, would not harm to put some more effort on these activities
    * consider implementing HLPROG re-start functionality to serve operational implementations (Niko)
    * reproducibility study between 32/64-bit codes (Jacob & Kalle)  
    * portability would benefit of GNU configure/make build system (Jacob, ...)
    * HIRVDA parallel efficiency open to improvement, OpenMP would help (Tomas,...)
    * coming multicore chips will require more OpenMP both in HLPROG and HIRVDA (Tomas,...)
    * inconsistencies in postpp should be tackled (?)
    * a good test case for unexplained IBM HLPROG crash to be used in further studies (Xiaohua)  
 * HARMONIE scripts with mini-SMS or SMS
   * [[Color(blue, Discussed items (Ulf) )]]
     * We need something very soon to give the system a better functionallity. Especially when it comes to compilation and postprocessing.
   * [[Color(red, Decision or Conclusions )]]
     * As a short term solution mSMS is a small investement, for the longer term it's an open question
== '''Planning of system workshop/working week''' ==
 * HARMONIE system workshop
   * tentatively: Sept 3-7 2007 (week 36), Copenhagen, DMI
   * agenda: 1-2 days meeting + 2/3 days work
   * purpose
     1. recommendation of MG on HARMONIE system design (Prep-IFS? SMS/mini-SMS? version control, FA-> GB etc.)
     1. scripting work with mini-SMS or SMS; + more according to needs
   * tentative participants: Tomas, Ulf, Sami, Toon, Ole, Bjarne S.A., Xiaohua, + invited (Mariano, Gerard +)
 * HIRLAM system training week for new-comers
   * tentatively: early 2008 hosted by EMHI or LHMI or LEMI with < 10 attendees
   * purpose: practical help for starting up HIRLAM forecast system for both operational and research purposes
 * HIRLAM (synoptic-scale) system workshop (for sysopr)
   * no definite plan yet
 * HIRLAM system working week
   * no definite plan yet
== '''Appendix: Participant lists''' ==
 * System-group:
   * DMI: Jacob, Kai, Xiaohua 
   * FMI: Kalle, Niko
   * KNMI: Toon
   * met.no: Ole
   * SMHI: Tomas, Ulf
 * Also presented: 
   * INM: Mariano
   * KNMI: John
   * LHMS: Paulius
   * LEMI: Ivars
[[PageOutline]]
[[Center(begin)]]
= '''Release notes of HIRLAM 7.1.1''' =
[[LastModified]]
[[Center(end)]]

== Highlights of 7.1.1 ==

Hirlam 7.1.1 is an update to the official release, [wiki:Hirlam_7.1]. The update consists of several source code and scripts corrections to Hirlam 7.1. Among them, the correction on missing cloud ice representation in radiation parameterization has been seen to have meteorological significance when tested with the reference STRACO condensation scheme. Similar impact is expected for forecasts using the optional Kain Fritsch Rasch Kristjansson scheme. The update also corrects on calculation of several post-processing parameters related to total cloud condensate. Several additional technical improvement over that of the [wiki:Hirlam_7.1] are also included in the release.

Updates candidates for 7.1.1 have been validated on ECMWF/HPCE platform for the reference set-up, which indicates [https://hirlam.org/trac/wiki/Hirlam_7.1TestEvaluation#Evaluationof7.1.1 improved upper air temperature profiles and reduced winter-time surface temperature bias]. Similar impact may be expected for forecasts using the optional KFRK scheme.

Hirlam 7.1.1 now replaces that of Hirlam 7.1 as official Hirlam release. The complete source code of Hirlam 7.1.1 can be obtained by following means

 * Use Subversion command
{{{
   svn co https://svn.hirlam.org/tags/hirlam-7.1.1
}}}
 * Download tarball from ECMWF ecgate:/scratch/ms/dk/nhz/hirlam-7.1.1.tar.gz or ecfs:/hirlam/src/tar/hirlam-7.1.1.tar.gz which contains the sandbox (check-out version) of the Hirlam 7.1.1

== Description of the changes ==

HIRLAM 7.1.1 contains bug corrections and technical improvements on top of the release Hirlam-7.1. A detailed listing of the code and script changes can be found in [https://hirlam.org/trac/log/branches/hirlam-7.1?action=stop_on_copy&rev=5159&stop_rev=5036&mode=stop_on_copy the summary page on trac wiki]. The main features are listed as following:

 * correction of derivation for 'pure' cloud water and cloud ice as used in radiation calculation. This has impact on both STRACO and Kain Fritcsh Rash Kristjansson condensation scheme. The bug in Hirlam 7.1 has had impact that cloud ice failed to be represented in radiation parameterisation. Note that for the optional KFRK scheme, total cloud condensate remains the prognostic variable, in contrast to the case in STRACO scheme, in which the prognostic quantity has been switched to cloud water and cloud ice since version 7.1. Corresponding to this difference, the default forecast namelist variable KSVAR is now set to 1 for KFRK scheme and 2 for STRACO (Yang [5133], Rontu [5158])
 * correction in post-processing for cloud water-related diagnostics, to take into account introduction of "pure" cloud water since Hirlam-7.1 for STRACO condensation scheme. The update also introduces vertically integrated fields for cloud ice, cloud liquid water, cloud condensate (this is a sum of ice and liquid, replacing the old cloud water path, the reconstructed variable being now available with a new grib-code 137-200-0) and TKE. (Rontu and Tijm, [5135])
 * bug fix to avoid potential hanging of HGS server (Vignes, [5129])
 * optional derivation of dimensions for observation arrays in VAR such as plen, nobsh_local and nobsh_hi. To activate, edit Env_expdesc to define OBDYNAC as yes (Lindskog and Yang [5147])
 * correction to avoid going over array bound in vineta.F (Eerola and Poulsen, [5147])
 * correction to ensure ECFS archiving of log files on ECMWF platforms. The log files (`HL_*.html` files) are archived under the cycle-directory ($CYCLEDIR), as well as in the experiment directory on the permanent ECFS directory `ec:`. So even if ECFSLOC is set to `ectmp`, a copy of the log-files should be saved under the permanent ECFS directory (Sattler, [5145] and [5151]).
 * other minor bug fixes and technical improvements ([5036], [5124], [5130] etc.)

== How to run Hirlam 7.1.1 ==

See instructions on wiki page for [https://hirlam.org/trac/wiki/Hirlam_7.1#Installandrun7.1.1onECMWFplatforms Hirlam 7.1]

== Acknowledgement ==

Special thanks to Laura Rontu, FMI, who initiated discussion on inconsistency of cloud water definition in STRACO and KFRK schemes since 7.1. The discussion leads ultimately to detection of bugs in cloud ice representation in radiation schemes. Sander Tijm, Ole Vignes, Kai Sattler, Magnus Lindskog, Kalle Eerola, Jacob Weismann Poulsen, Alastair Mckinstry, Tomas Wilhelmsson and Xiaohua Yang have also contributed to the code updates featured in this release.

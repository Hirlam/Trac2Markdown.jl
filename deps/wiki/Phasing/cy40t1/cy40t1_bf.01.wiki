[[PageOutline]]
[[Center(begin)]]
== '''HARMONIE 40t1 phasing''' ==

This page summarizes the difference between cy40t1_bf.01 and branches/phasing/cy40.

[[Center(end)]]

[[BR]]

== '''Summary table''' ==

|| '''Changes to send to bf.02''' ||
|| '''Contribution'''    || '''Author'''            || '''Comments''' || 
|| SURFEX lfi to FA translations [12785],[12794],[12971],[12972] || Trygve Aspelien, Eoin Whelan || changes to [source:branches/phasing/cy40/src/mse/module/sfxflddesc_mod.F90] only  || 
|| Add missing deallocations [12936] || Eoin Whelan || || 
|| Correct deallocation [12787] || Trygve Aspelien || || 
|| Portability, break long lines [12876] || || ||
|| Add missing default values [12781] || Trygve Aspelien || || 
|| '''Changes to be kept for further discussions with MF''' ||
|| Avoid uninitialized value in CANARI [13031] || Trygve Aspelien || Is the solution the correct one? ||
|| Make sure namelists (snow scheme) are set correctly in prep [12975] || Trygve Aspelien || || 
|| Correct alaro interface to SURFEX || || || 
|| Avoid hardcoded HREC length in SURFEX interface routines [12794] || Trygve Aspelien || check with MF || 
|| '''Changes to be kept for cy41t1 discussion''' ||
|| SODA EKF updates [12987] || Trygve Aspelien ||  ||
|| Fixes to allow compilation with -warn all [12953] || Ulf Andrae || ||
|| '''Kept in HIRLAM repository only''' ||
|| [#HIRLAMspecificpregpssolfixes] || || ||
|| [#Batorchanges] || || ||
|| [#Blacklisting] || || ||
|| [#4DVARfixes] || || || 
|| [#BDIFF] || || ||
|| [#Nameconventionofcloudfields] || || ||



== '''All differences''' ==

Below is a list of differences between the current phasing branch for [source:harmonie/branches/phasing/cy40/src cy40_phasing] based on cy40 and [source:vendor/aladin/current cy40t1_bf.01] as extracted from git. This is so far only an inventory and should serve as an input for further discussions.

------------------------------------------------------------------------

=== Solid microphysics ===
Karl-Ivar Ivarsson, r12250

More strict separation of liquid- and ice microphysics in arome condensation The scheme is controlled by the switch LOCND2 in namparar and is switched off by default 


{{{
Files:
  arp/module/yomparar.F90
  arp/phys_dmn/apl_arome.F90
  arp/phys_dmn/suparar.F90
  mpa/micro/externals/aro_adjust.F90
  mpa/micro/externals/aro_rain_ice.F90
  mpa/micro/interface/aro_adjust.h
  mpa/micro/interface/aro_rain_ice.h
  mpa/micro/internals/condensation.F90
  mpa/micro/internals/ini_rain_ice.F90
  mpa/micro/internals/ice_adjust.F9
  mpa/micro/internals/rain_ice.F90
  mpa/micro/module/modi_condensation.F90
  mpa/micro/module/modi_ice_adjust.F90
  mpa/micro/internals/rain_ice.F90
}}}



------------------------------------------------------------------------

------------------------------------------------------------------------

=== Varbc ===
 - VarBC predictor levels
 - GPS changes
{{{
Files:
  arp/module/varbc_pred.F90
  arp/obs_preproc/black.F90
  arp/op_obs/hop.F90
  arp/op_obs/hopad.F90
  arp/op_obs/hoptl.F90
  arp/utility/prtjo.F90
  odb/ddl/getsfcobsid.sql
  odb/ddl/varbc_sfcobs_robhdr.sql
}}}

------------------------------------------------------------------------
=== SODA in CANARI ===
Trygve Asplien
- EKF changes
- SODA inline ( CANARI ) changes

{{{
Files:
  arp/canari/canali.F90
  arp/module/qactex.F90
  arp/module/yomlun.F90
  arp/utility/openfa.F90
  arp/utility/openfainfo.F90
  mse/externals/aroini_surfa.F90
  mse/externals/aroini_surfc.F90
  mse/externals/sugridsfx.F90
  mse/externals/suphmse_surface.F90
  mse/interface/aroini_surfa.h
  mse/interface/sugridsfx.h
  mse/programs/driver_off_omp.F90
  mse/externals/deallmse.F90
  mse/module/modd_io_surf_aro.F90
}}}

------------------------------------------------------------------------
=== Portability fixes ===
r12953 | uandrae | 2014-04-02 15:01:16 +0200 (Wed, 02 Apr 2014) | 8 lines

Ulf Andrae: Changes to please ifort with -warn all compilation flags
- Loads of INTENT(OUT) changed to IN/INOUT
- Correct IVDEP directive locations
- Correct parenthesis format errors
- Lower JPFORC to fit with FA name conventions/grib
- Correct usage of TINY in gribex maxmin routine
- Update system config, compilation flags and compilation exceptions for krypton

{{{
Files found for r12953:
  arp/adiab/cpg5_gp.F90
  arp/adiab/cpg_dia.F90
  arp/adiab/cpg_dyn.F90
  arp/adiab/cpg_gp.F90
  arp/adiab/cpg_gpb_nhgeogw.F90
  arp/adiab/laconead.F90
  arp/adiab/postphy.F90
  arp/chem/chem_mocage.F90
  arp/chem/chem_mozart.F90
  arp/chem/tm5_chem_ini.F90
  arp/module/yom_ygfl.F90
  arp/obs_preproc/radar_profs.F90
  arp/op_obs/cloud_estimate.F90
  arp/op_obs/kernel_pbp_ad.F90
  arp/op_obs/slint.F90
  arp/phys_dmn/acconvsad.F90
  arp/phys_dmn/aclspsad.F90
  arp/phys_dmn/acnebsmad.F90
  arp/phys_dmn/acnuagesad.F90
  arp/phys_dmn/apl_arome.F90
  arp/phys_ec/cloud_layer.F90
  arp/phys_ec/convection_layer.F90
  arp/phys_ec/convection_s_layer.F90
  arp/phys_ec/cuadjtq.F90
  arp/phys_ec/cubasmcn.F90
  arp/phys_ec/cuflxn.F90
  arp/phys_ec/cumastrn.F90
  arp/phys_ec/sltend_layer.F90
  arp/phys_ec/turbulence_layer.F90
  arp/phys_ec/vdfmain.F90
  arp/setup/suvert.F90
  arp/var/jbtomodelad.F90
  mse/internals/write_surft1_aro.F90
  odb/extras/emos/bugbts.F
  odb/pandor/extrtovs/extr_lib_1c.F90
  sur/module/ocean_ml_driver_v2_mod.F90
  sur/module/srfsn_rsn_mod.F90
  surfex/SURFEX/bem.F90
  surfex/SURFEX/default_teb_veg.F90
  surfex/SURFEX/init_from_data_greenroofn.F90
  surfex/SURFEX/init_veg_gardenn.F90
  surfex/SURFEX/init_veg_pgdn.F90
  surfex/SURFEX/mode_sltmbl.F90
  surfex/SURFEX/mode_splines.F90
  surfex/SURFEX/mode_write_surf_fa.F90
  surfex/SURFEX/read_gridtype_cartesian.F90
  surfex/SURFEX/teb_morpho.F90
  tal/module/eprfi2b_mod.F90
  tal/module/euvtvd_comm_mod.F90
  tal/module/euvtvd_mod.F90
  tal/module/suemplatb_mod.F90
}}}


------------------------------------------------------------------------
=== HIRLAM specific pregpssol fixes ===
 
{{{
Files:
  uti/pregpssol/pregpssol.F90
  uti/pregpssol/read_obsoul_gpssol.F90
  uti/pregpssol/write_obsoul_gpssol.F90
}}}

------------------------------------------------------------------------

=== Bator changes ===
- Reading of HDF5
- Decoding of satellite BUFR data, LMFBUFR flag.
- Radar settings

{{{
Files:
  odb/pandor/module/bator_decodbufr_mod.F90
  odb/pandor/module/bator_init_mod.F90
  odb/pandor/module/bator_lectures_mod.F90
  odb/pandor/module/bator_module.F90
  odb/pandor/module/bator_util_mod.F90
  odb/pandor/namelist/bator_namelist.h
  odb/tools/Bator.F90
  odb/pandor/module/bator_decodhdf5_mod.F90
  odb/pandor/module/bator_rad_postproc_mod.F90
}}}
------------------------------------------------------------------------

=== Blacklisting ===

{{{
Files
  bla/mf_blacklist.b
}}}
------------------------------------------------------------------------

=== 4DVAR fixes ===
r7973 | ovignes | 2010-04-26 15:36:10 +0200 (Mon, 26 Apr 2010) | 2 lines

Port 4DVAR changesets (7141,7167,7181,7200,7220,7545,7957) from 35h1branch

{{{
Files:
  ald/fullpos/suefpg3.F90
  ald/programs/blendsur.F90
}}}

------------------------------------------------------------------------

=== BDIFF ===
Gergely Boloni, r8768

{{{
Files:
  arp/module/yemct0.F90
  arp/pp_obs/ppreq.F90
  arp/setup/suctrl_gflattr.F90
  ald/programs/bdiff.F90
}}}

------------------------------------------------------------------------

=== Name convention of cloud fields ===

r9414 | trygveasp | 2011-06-07 09:27:54 +0200 (Tue, 07 Jun 2011) | 32 lines

{{{
Files:
  ald/programs/blend.F90
}}}

------------------------------------------------------------------------

[[Color(red, Last modified on)]] [[LastModified]]
[[Center(end)]]


= Documentation of branch NEW_PREP_HIRLAM =

This branch is used in cy40t1 and is intended used as base for SURFEX vs 8. This wiki summarizes the HIRLAM changes in this branch.

== SODA related changes ==

* The *assim* code and oi_* code is moved to the new directory ASSIM. It was identified that after the introducing the IO server it would not be possible to use SODA the way it was implemented as reading and writing of files were done within the code. A joint effort by Philippe Marginaud was done to separate the reading and writing out of SODA and to use the existing initalization routines. This implies that all routines assim_* are using the internal SURFEX module variables.

SODA test case...

== Extrapolations in the initialization == 


== Alternative weighting of T2M == 

== Correct update of LAI for ECOCLIMAP-II and openMP ==

== Test case for KRYPTON ==

----

Unique or differing files:

{{{
MY_RUN/FORCING/prepare_forcing.bash
src/Makefile.SURFEX.mk
src/OFFLIN/mode_read_surf_nc.F90
src/OFFLIN/mode_write_surf_nc.F90
src/OFFLIN/mode_write_surf_ol.F90
src/OFFLIN/ol_read_atm_conf_ascii.F90
src/SURFEX/average_diag.F90
src/SURFEX/default_diag_surf_atm.F90
src/SURFEX/default_prep_isba.F90
src/SURFEX/diag_surf_atmn.F90
src/SURFEX/init_surf_atmn.F90
src/SURFEX/modd_diag_surf_atmn.F90
src/SURFEX/modd_prep_isba.F90
src/SURFEX/modd_surfex_mpi.F90
src/SURFEX/mode_read_surf_fa.F90
src/SURFEX/modn_prep_isba.F90
src/SURFEX/modn_prep_isba_snow.F90
src/SURFEX/modn_surf_atmn.F90
src/SURFEX/prep_isba.F90
src/SURFEX/prep_isba_buffer.F90
src/SURFEX/prep_snow_buffer.F90
src/SURFEX/read_isban.F90
src/SURFEX/read_namelists_surfn.F90
src/SURFEX/read_prep_garden_snow.F90
src/SURFEX/read_prep_isba_snow.F90
src/SURFEX/read_tebn.F90
src/SURFEX/vegetation_update.F90
MY_RUN/SODA
MY_RUN/SODA/NAMELISTS
MY_RUN/SODA/NAMELISTS/OPTIONS.nam_offline
MY_RUN/SODA/NAMELISTS/OPTIONS.nam_pgd
MY_RUN/SODA/NAMELISTS/OPTIONS.nam_pgd_patch
MY_RUN/SODA/NAMELISTS/OPTIONS.nam_prep
MY_RUN/SODA/NAMELISTS/OPTIONS.nam_soda_EKF
MY_RUN/SODA/NAMELISTS/OPTIONS.nam_soda_OI
MY_RUN/SODA/OUTPUT
MY_RUN/SODA/README
MY_RUN/SODA/RUN
MY_RUN/SODA/TESTS
MY_RUN/SODA/TESTS/EKF.sh
MY_RUN/SODA/TESTS/OFFLINE.sh
MY_RUN/SODA/TESTS/OI.sh
MY_RUN/SODA/run_soda.sh
TESTS
TESTS/KRYPTON
TESTS/KRYPTON/comp.py
TESTS/KRYPTON/offline.exe
TESTS/KRYPTON/offline_mpi.exe
TESTS/KRYPTON/offline_mpiomp.exe
TESTS/KRYPTON/offline_new_prep.exe
TESTS/KRYPTON/offline_new_prep_hirlam.exe
TESTS/KRYPTON/offline_omp.exe
TESTS/KRYPTON/pgd.exe
TESTS/KRYPTON/pgd_new_prep.exe
TESTS/KRYPTON/pgd_new_prep_hirlam.exe
TESTS/KRYPTON/pgd_omp.exe
TESTS/KRYPTON/prep.exe
TESTS/KRYPTON/prep_new_prep.exe
TESTS/KRYPTON/prep_new_prep_hirlam.exe
TESTS/KRYPTON/python.exe
TESTS/KRYPTON/script_all.sh
src/ASSIM
src/ASSIM/assim_inland_watern.F90
src/ASSIM/assim_isba_update_snow.F90
src/ASSIM/assim_isban.F90
src/ASSIM/assim_nature_isba_ekf.F90
src/ASSIM/assim_nature_isba_oi.F90
src/ASSIM/assim_naturen.F90
src/ASSIM/assim_read_sst_from_file.F90
src/ASSIM/assim_sean.F90
src/ASSIM/assim_surf_atmn.F90
src/ASSIM/assim_tebn.F90
src/ASSIM/assim_townn.F90
src/ASSIM/default_assim.F90
src/ASSIM/ini_assim.F90
src/ASSIM/modd_assim.F90
src/ASSIM/modn_assim.F90
src/ASSIM/oi_acsolw.F90
src/ASSIM/oi_bc_soil_moisture.F90
src/ASSIM/oi_cacsts.F90
src/ASSIM/oi_cavegi.F90
src/ASSIM/oi_control.F90
src/ASSIM/oi_fctveg.F90
src/ASSIM/oi_hor_extrapol_surf.F90
src/ASSIM/oi_jacobians.F90
src/ASSIM/oi_kalman_gain.F90
src/ASSIM/oi_latlon_conf_proj.F90
src/ASSIM/oi_main.F90
src/ASSIM/oi_tsl.F90
src/ASSIM/read_assim_conf.F90
src/ASSIM/read_namelists_assim.F90
src/ASSIM/soda.F90
}}}
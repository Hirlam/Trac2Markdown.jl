[[PageOutline]]
[[Center(begin)]]
= '''Phasing information for Cycle 43T1''' =
[[Center(end)]]


= Cycle Master =

Cycle Master: Niko Sokka

= Potential contributions=

Summary of all differences between 40h1 ( trunk@14582 ) and cy40t1_bf.05

Note that some of the changes have already been sent to 41t1. Search for "Sent to 41t1" or "Part sent to 41t1". Also compare [wiki:41t1] and check the attachments for the full list of differences.

Last updated:2015-12-21


== Dynamics ==

=== Fixes for DFI ===
Authors: Ole Vignes

Description
DFI corrections for non-hydrostatic runs.
Both fdfi and idfi should work for both Arome and Alaro now

svn changesets: 14559

Changed:
{{{
arpifs/dfi/dfi2.F90
arpifs/dfi/dfi3.F90
arpifs/setup/suxfu.F90
}}}

=== Cubic grid changes ===

Authors: Mariano Hortal

Description: Limit for stability, NFOST

svn changesets:14150,14580

Changed:
{{{
arpifs/adiab/gnhd3.F90
arpifs/adiab/lattes.F90
arpifs/adiab/lattex_dnt.F90
arpifs/adiab/lavent.F90
arpifs/module/yomdyna.F90
arpifs/namelist/namdyna.nam.h
arpifs/setup/sudyna.F90
}}}

=== LGRADSP & LUNBC ===
Authors: Mariano Hortal

Description:
Corrections to make LGRADSP and LUNBC work properly in cy40h1
Partly sent to 41t1

svn changesets:13611,13084,13721,13578

Changed:
{{{
aladin/adiab/espfilt.F90
aladin/c9xx/ebicli.F90
aladin/control/espcm.F90
aladin/coupling/ecoupl1.F90
aladin/coupling/elswa3.F90
aladin/coupling/eseimpls.F90
aladin/setup/suehdf.F90
aladin/setup/sueldynb.F90
aladin/transform/etransdir_mdl.F90
aladin/transform/etransinv_mdl.F90
aladin/transform/etransinvh.F90
arpifs/adiab/gptf1.F90
arpifs/ald_inc/namelist/nemelbc0b.nam.h
arpifs/fullpos/cvlaniso.F90
arpifs/module/elbc0b_mod.F90
arpifs/module/gmv_subs_mod.F90
arpifs/module/yomdyndiff.F90
arpifs/module/yomspbd.F90
arpifs/module/yomsp.F90
arpifs/utility/sualspa.F90
coupling/external/gpcou/esc2r.F90
}}}

New:
{{{
aladin/adiab/espfilt.F90
aladin/coupling/esurlxt1.F90
}}}
=== LSPBDC ===

Authors: Mariano Hortal

Description:
Spectral coupling

QUESTION

Is this really needed any more, gone in 40t1_bf.05?

{{{
aladin/coupling/ecoupl1.F90 line 151-164
! initialization by a large negative number
!$OMP parallel
!$OMP workshare
ZGT1GMV(1:NEDLST,1:NFLEVG,1:YYTGMVCPL%NDIM)=-9999
!$OMP end workshare
IF(LUNBC) ZGT1UGMV(1:NGPTOT,1:NFLEVG,1:YYTGMVCPL%NDIM)=-9999
!$OMP workshare
ZGT1GMVS(1:NEDLST,1:YYTGMVSCPL%NDIM)=-9999
!$OMP end workshare
IF(LUNBC) ZGT1UGMVS(1:NGPTOT,1:YYTGMVSCPL%NDIM)=-9999
!$OMP workshare
ZGT1GFL(1:NEDLST,1:NFLEVG,1:NDIMCPL)=-9999
!$OMP end workshare
!$OMP end parallel
}}}

svn changesets: 13611

Changed:
{{{
aladin/coupling/ecoupl1.F90
coupling/external/gpcou/esc2r.F90
}}}

New:
{{{
arpifs/module/yomspbd.F90
}}}

== Upper air assimilation ==
=== Radar assimilation fix ===

Authors: Sami Saarinen

Description:
Protected against volatile use of IPOS+1 in radar reflectivity (NVNUMB(74)) 

svn changesets: 14076

Changed:
{{{
arpifs/obs_preproc/flgtst.F90
}}}

=== Corrections for GNSS ===

Authors: Magnus Lindskog et.al

Description:
VarBC code and namelist corrections
GPS preparations updates
Sent to 41t1

svn changesets:12738,13437

Changed:
{{{
arpifs/module/varbc_sfcobs.F90
arpifs/obs_preproc/black.F90
arpifs/op_obs/hop.F90
arpifs/op_obs/hopad.F90
arpifs/op_obs/hoptl.F90
arpifs/utility/prtjo.F90
odb/ddl/getsfcobsid.sql
odb/ddl/varbc_sfcobs_robhdr.sql
utilities/pregpssol/filter_gpssol.F90
utilities/pregpssol/pregpssol.F90
utilities/pregpssol/read_obsoul_gpssol.F90
utilities/pregpssol/write_obsoul_gpssol.F90
}}}


=== Bator updates ===

Authors: Martin Ridal, Roger R.

Description: Required changes to make radar assimilation in cy38 work. The bufr decoding is implemented in parallel to the one by Meteo France for the time being.

    Introduce ATOVS_SOURCE and IASI_SOURCE (mars,local,hirlam)
    RTTOV coefficients updated to version 10
    VarBC used also for aircraft data
    Namelist changes for new set of predictors (Magnus+Sigurdur)
    Always cold start VarBC coefficients 

TODO: include coefficients for new instruments, but maybe move these
(and old ones) out of subversion control since they are huge and don't
change very often

svn changesets:12321,11219,12687,12560,11448,12215

Changed:
{{{
odb/pandor/module/bator_decodbufr_mod.F90
odb/pandor/module/bator_init_mod.F90
odb/pandor/module/bator_lectures_mod.F90
odb/pandor/module/bator_module.F90
odb/pandor/module/bator_rad_postproc_mod.F90
odb/pandor/module/bator_util_mod.F90
odb/pandor/namelist/bator_namelist.nam.h
odb/tools/Bator.F90
}}}

New:
{{{
odb/pandor/module/bator_decodhdf5_mod.F90
}}}

=== FEMARS for LAM ===

Authors: Ulf Andrae

Description:
Enable creating forecast differences with NAMVAR/LFEMARS=T. In case of Q in gridpoint space set NEMCT0/L_GPQ_DIFF=T
Sent to 41t1

svn changesets: 13155,13578

Changed:
{{{
aladin/setup/suect0.F90
arpifs/ald_inc/namelist/nemct0.nam.h
arpifs/control/cnt3.F90
arpifs/module/yemct0.F90
arpifs/module/yomvar.F90
arpifs/namelist/namvar.nam.h
arpifs/setup/suctrl_gflattr.F90
arpifs/var/suvar.F90
}}}


=== Moist total energy norm ===

Authors: Roger R.

Description:
Calculation of moist total energy norm

svn changesets:13038

New:
{{{
utilities/mten/module/mod_aladin.F90
utilities/mten/module/mod_geopotential.F90
utilities/mten/module/mod_myfrtprof.F90
utilities/mten/module/mod_spectral.F90
utilities/mten/module/mod_utils.F90
utilities/mten/programs
utilities/mten/programs/mten.F90
utilities/mten/src
utilities/mten/src/afread.F90
utilities/mten/src/compute_tmen.F90
utilities/mten/src/get_alacadre.F90
utilities/mten/src/print_fgheader.F90
utilities/mten/src/qtorh.F
utilities/mten/src/read_alafields.F90
utilities/mten/src/read_alafields_ref.F90
utilities/mten/src/read_alaheader.F90
utilities/mten/src/sevinitenv.F90
utilities/mten/src/sevtermenv.F90
utilities/mten/src/tabdef.F
}}}

=== Ensemble perturbations ===

Authors: Jelena Bojarova

Description:
Generation of ensemble perturbations with the structure of the background error covariance for LAM.
LBGPERT=TRUE, NBGVECS ensemble members are generated around back-ground with the structure of the B matrix covariance 
through call to the inverse change of variable. Optionally ( LPERTRELAX = TRUE) random perturbations are relaxed 
towards the host model perturbations on the lateral boundaries. Ensemble boundary perturbations zone is twice as 
large as one for the control in order to avoid problems due to imbalances close to lateral boundaries. 
The ensemble of random perturbations can eventually be used to initialise the ensemble run or as an additive noise 
to maintain the appropriate spread of LAM ensemble.

svn changesets:14580

Changed:
{{{
aladin/var/ebalvert.F90
aladin/var/suevargp.F90
algor/module/spectral_fields_mod.F90
arpifs/ald_inc/namelist/nemvar.nam.h
arpifs/control/cva1.F90
arpifs/module/yemvargp.F90
arpifs/module/yomlun.F90
arpifs/module/yomoph.F90
arpifs/module/yomvar.F90
arpifs/namelist/namvar.nam.h
arpifs/setup/su0yomb.F90
arpifs/setup/suctrl_gflattr.F90
arpifs/setup/suoph.F90
arpifs/utility/addbgs.F90
arpifs/utility/openfainfo.F90
arpifs/utility/random_ctlvec.F90
arpifs/utility/setimzero.F90
arpifs/var/suvar.F90
}}}

New:
{{{
aladin/module/yembdpert.F90
aladin/programs/addpert.F90
aladin/setup/deall_bdpert.F90
aladin/setup/suebdpert.F90
aladin/utility/create_pert.F90
aladin/utility/ebndgp.F90
aladin/utility/read_pert.F90
arpifs/var/bgpert.F90
}}}


=== Observation perturbations ===

Authors: Roger R.

Description
Introduction of observation perturbations. The perturbation options are controlled by PERTATMO and PERTSURF respectively. 
Sent to 41t1

svn changesets:

New:
{{{
odb/pandor/module/random_numbers.F90   !!!! Use algor/module/random_numbers_mix.F90 instead
odb/tools/Pertcma.F90
odb/ddl.CCMA/pertcma.sql
odb/ddl.ECMA/pertcma.sql
odb/ddl/pertcma.sql
}}}


=== 4DVAR changes ===

Authors: Jan Barkmeijer, Magnus Lindskog, Ulf Andrae, Ole Vignes

Description: 
Changes required to make 4DVAR AROME work

svn changesets: 7973,14359

Changed:
{{{
aladin/fullpos/suefpg3.F90
src/arpifs/control/cnt4.F90, we should really keep this fix with LODB_UPD_END_TRAJ
arpifs/module/gfl_subs_mod.F90
arpifs/obs_preproc/mkglobstab.F90
arpifs/setup/su0phy.F90
arpifs/setup/su_surf_flds.F90
arpifs/utility/add5to3.F90
arpifs/utility/rdgpfa.F90
arpifs/utility/sbs5to3.F90
arpifs/var/rdfpinc.F90
arpifs/var/suvar.F90
}}}


== Surface assimilation ==

=== Correct snow assimiliation ===

Authors: Mariken Homleid

Description:

svn changesets: 14390

Changed:	
{{{
surfex/ASSIM/assim_isba_update_snow.F90
}}}

=== CANARI ===

Authors:Ulf Andrae

Description:
Fix for erroneous pointer in Canari
Change ISWAP=1 to ISWAP=2

IF (NCONF == 701) THEN
		 ! Simple memory transfer, no temporal interpolation (horizontal derivatives are useless):
		  ISWAP=2
...
ENDIF

svn changesets:?

Changed:
{{{
aladin/coupling/ecoupl1.F90
}}}


=== Take ice temperature from ECMWF (if EC-SST) instead of climatology ===

Authors: Mariken Homleid

Description:
Sent to 41t1

svn changesets: 13522

Changed:
{{{
arpifs/canari/caclsst.F90
}}}


=== SODA interface ===

Authors: Trygve Aspelien

Description:
Sent to 41t1

svn changesets: 12325,12801,12779,12987,13578,14509,14510

Changed:
{{{
arpifs/canari/canali.F90
arpifs/module/qactex.F90
arpifs/module/yomlun.F90
arpifs/module/yomparar.F90
arpifs/namelist/nactex.nam.h
arpifs/utility/openfa.F90
arpifs/utility/openfainfo.F90
mse/externals/aroini_surfa.F90
mse/externals/aroini_surfc.F90
mse/externals/canari_sx_ics.F90
mse/externals/deallmse.F90
mse/externals/sugridsfx.F90
mse/externals/suphmse_surface.F90
mse/interface/aroini_surfa.h
mse/interface/sugridsfx.h
mse/internals/fminit.F90
mse/programs/driver_off_omp.F90
mse/programs/prep.F90
surfex/ASSIM/assim_nature_isba_ekf.F90
surfex/SURFEX/prep_hor_snow_fields.F90
surfex/SURFEX/snowcro.F90
}}}

New:
{{{
mse/programs/soda.F90
}}}

== Upper air physics ==
=== Fix out of bounds problem ===

Authors: Niko Sokka

Description:

svn changesets: 13931

Changed:
{{{
arpifs/phys_radi/rrtm_rtrn1a_140gp.F90
}}}

=== Changes to get ALARO0 run with SURFEX ===

Authors: Ulf Andrae

Description:
Partly sent to 41t1

svn changesets: 12485

Changed:
{{{
arpifs/phys_dmn/initaplpar.F90
arpifs/phys_dmn/apl_arome.F90
arpifs/phys_dmn/aplpar.F90
mse/externals/aro_ground_diag.F90
mse/interface/aro_ground_diag.h
mse/programs/driver_off_omp.F90
surfex/SURFEX/get_fluxn.F90
}}}

=== Corrections and cleaning of maximum random overlap calculations ===

Authors: Lisa Bengtsson

Description:
        Avoid division of 0/0 leeding to erroneous results
        Unify apl_arom/aplpar calulcations and remove obsolete compute_neb.F90 


svn changesets: 14126

Changed:
{{{
arpifs/phys_dmn/acnpart.F90
arpifs/phys_dmn/apl_arome.F90
arpifs/phys_dmn/aplpar.F90
}}}

Removed:
{{{
arpifs/phys_dmn/compute_neb.F90
}}}

=== OCND2 ===

Authors: Karl-Ivar Ivarsson

Description: 
More strict separation of liquid- and ice microphysics in arome condensation
The scheme is controlled by the switch LOCND2 in namparar and is switched off by default 
Partly sent to 41t1

svn changesets: 13073,12250,12260,13721,13617,12271

Changed:
{{{
arpifs/module/yomparar.F90
arpifs/namelist/namparar.nam.h
arpifs/phys_dmn/apl_arome.F90
arpifs/phys_dmn/suparar.F90
mpa/micro/externals/aro_adjust.F90
mpa/micro/externals/aro_rain_ice.F90
mpa/micro/externals/aroini_micro.F90
mpa/micro/interface/aro_adjust.h
mpa/micro/interface/aro_rain_ice.h
mpa/micro/interface/aroini_micro.h
mpa/micro/internals/condensation.F90
mpa/micro/internals/ice_adjust.F90
mpa/micro/internals/ini_cst.F90
mpa/micro/internals/ini_rain_ice.F90
mpa/micro/internals/rain_ice.F90
mpa/micro/module/modd_cst.F90
mpa/micro/module/modi_condensation.F90
mpa/micro/module/modi_ice_adjust.F90
mpa/micro/module/modi_rain_ice.F90
}}}

New:
{{{
mpa/micro/internals/icecloud.F90
mpa/micro/internals/ini_tiwmx.F90
mpa/micro/internals/tiwmx_tab.F90
mpa/micro/module/modd_tiwmx.F90
mpa/micro/module/modd_tiwmx_fun.F90
mpa/micro/module/modi_icecloud.F90
mpa/micro/module/modi_ini_tiwmx.F90
mpa/micro/module/modi_tiwmx.F90
}}}

=== Add temperature dependent critical condensation in EDMFm ===

Authors: Lisa Bengtsson

Description:
-With LLCRIT=TRUE the critical condensation threshold in the Sundquist parameterization for precipitation generation is described as a function of temperature at the lifting condensation level. For lower temperatures the threshold is lower as it was reasoned that precipitation production is likely to be favored by active ice-phase processes, so that when cloud-base temperature is close to freezing point, precipitation is possible with relatively shallow convective clouds (Kain and Fritsch, 1990). This type of phenomena is particularly evident inpredictions of "lake-effect snow" (e.g., Niziol et al. 1995) and simulations in MetCoOp? has benefited from the new parameterization when precipitation (snow) falls over sea and near the coast from relatively shallow convection

svn changesets: 14374

Changed:
{{{
arpifs/module/yomparar.F90
arpifs/namelist/namparar.nam.h
arpifs/phys_dmn/vdfparcelhl.F90
arpifs/phys_dmn/suparar.F90
}}}

=== Introduce HARATU scheme ===

Authors: Wim De Rooy & Karl-Ivar Ivarsson

Description:
        Include switch called LHARATU (HArmonie with RAcmo TUrbulence scheme) to run with a turbulence scheme originally developed for RACMO (Regional Atmospheric Climate MOdel). The length scale of this turbulence scheme is described by Lenderink and Holtslag (QJRMS, 2004). Based on the ASTEX intercomparison case and long term verification, this turbulence scheme will increase the top entrainment of the boundary layer in comparison with the default scheme. The impact on almost all parameters is large. Generally, running with LHARATU=TRUE will lead to higher cloud base, less low clouds and fog, lower near surface wind speeds and temperature during night and more smooth (coherent) fields of e.g. cloud cover and precipitation.
        Time step input for VDFHGHTHL is changed from ZDT (half time step) to PDT (full time step). This change is only relevant for the shallow convection scheme if CMF_UPDRAFT=DUAL and for the turbulence scheme if LHARATU=TRUE. In the convection scheme this time step influences the mass flux limitation according to the CFL criterion. In the HARATU turbulence scheme PDT is the correct time step.
        The HARATU scheme is controlled by HARATU=yes/no in sms/config_exp.h 

svn changesets: 14385,13721

Changed:
{{{
arpifs/module/yomparar.F90
arpifs/namelist/namparar.nam.h
arpifs/phys_dmn/suphmpa.F90
arpifs/phys_dmn/vdfhghthl.F90
arpifs/phys_dmn/vdfhghtnhl.F90
arpifs/phys_dmn/apl_arome.F90
arpifs/phys_dmn/suparar.F90
mpa/turb/externals/aro_turb_mnh.F90
mpa/turb/interface/aro_turb_mnh.h
mpa/turb/internals/prandtl.F90
mpa/turb/internals/turb.F90
mpa/turb/internals/turb_ver.F90
mpa/turb/internals/turb_ver_dyn_flux.F90
mpa/turb/internals/turb_ver_sv_flux.F90
mpa/turb/internals/turb_ver_thermo_corr.F90
mpa/turb/internals/turb_ver_thermo_flux.F90
mpa/turb/module/modi_turb.F90
mpa/turb/module/modi_turb_ver.F90
mpa/turb/module/modi_turb_ver_dyn_flux.F90
mpa/turb/module/modi_turb_ver_sv_flux.F90
mpa/turb/module/modi_turb_ver_thermo_corr.F90
mpa/turb/module/modi_turb_ver_thermo_flux.F90
}}}

New:
{{{
arpifs/phys_dmn/vdfexcuhl.F90
}}}

=== Radiation updates ===

Authors: Kristian Pagh Nielsen, Laura Rontu, Emily Gleeson

Description:
    Corrections to SW calculation change to [13410]
    Enhance frameowrk for cloud optical properties settings, no change in default settings 
    Set new default N[SW|LW][LIQ|ICE]OPT = 3, i.e. Nielsen SW cloud liquid scheme; Smith-Shi LW cloud liquid; Fu SW&LW cloud ice.
    Remove RRe2De from the namelist since it depends on the choice of NRADIP.
    Set inhomogeneity factors (RSWINHF, RLWINHF) are to 1.0 more appropriate for current resolutions
    Removed second read of NAERAD. 

The SW direct/diffuse correction is two bug-fixes. Firstly, in the core SW
radiation routines where SWdir and SWdiff is calculated a calculation of
direct irradiances is now used, and the diffuse irradiances are calculated
as SWdiff = SWtotal - SWdir. Before SWdir and SWdiff were given the clear
sky and cloudy sky irradiances, which is wrong. The second bug-fix is to
pass radiation variables correctly towards the output via MF_PHYS. Note
the grib codes for downwelling accumulated surface direct (116-105-0-4)
and global (117-105-0-4) SW radiation, from which the diffuse flux can be
obtained as a difference.

Partly sent to 41t1

svn changesets: 14061,13537,12732,13608,12997,13767,13578,13410

Changed:
{{{
arpifs/module/yoerad.F90
arpifs/module/yoesw.F90
arpifs/namelist/naerad.nam.h
arpifs/phys_dmn/surdi15.F90
arpifs/phys_ec/callparad.F90
arpifs/phys_dmn/apl_arome.F90
arpifs/phys_dmn/mf_phys.F90
arpifs/phys_ec/radheat.F90
arpifs/phys_ec/radlsw.F90
arpifs/phys_ec/radlswad.F90
arpifs/phys_ec/radlswr.F90
arpifs/phys_ec/radlswtl.F90
arpifs/phys_ec/suclopn.F90
arpifs/phys_radi/suecrad.F90
arpifs/phys_radi/sw.F90
arpifs/phys_radi/sw1s.F90
arpifs/phys_radi/swni.F90
}}}

=== Output of direct normal irradiance (DNI) ===

Authors: Laura Rontu & Ulf Andrae

    Add output of direct normal irradiance as SURFDIR NORM IRR. Controlled by LRAYS.
    Changes in update of PFRSODS,PFRTHDS from apl_arome to radheat
    Control impact on radiation from snow and graupel through RADSN,RADGR in namparar

svn changesets:13468,13578,13767,14365

Changed:
{{{
arpifs/adiab/cpg.F90
arpifs/adiab/cpg_dia.F90
arpifs/dia/cpcfu.F90
arpifs/fullpos/hpos.F90
arpifs/fullpos/sufpcfu.F90
arpifs/module/parfpos.F90
arpifs/module/yomafn.F90
arpifs/module/yomparar.F90
arpifs/phys_dmn/apl_arome.F90
arpifs/phys_dmn/aplpar.F90
arpifs/phys_dmn/mf_phys.F90
arpifs/phys_dmn/suparar.F90
arpifs/setup/suafn1.F90
arpifs/setup/suafn2.F90
arpifs/setup/suafn3.F90
arpifs/setup/sucfu.F90
}}}

=== Updates to Cellular automata ===

Authors: Lisa Bengtsson

Description:
Sent to 41t1

svn changesets: 13262,13441

Changed:
{{{
arpifs/control/cuconvca.F90
arpifs/module/yoe_cuconvca.F90
arpifs/module/yomphy0.F90
arpifs/namelist/namphy0.nam.h
arpifs/phys_dmn/accvud.F90
arpifs/phys_dmn/suphy0.F90
}}}

== ODB ==

=== ODB updates ===

Authors: Sami Saarinen

Description:
Sent to 41t1

svn changesets: 12482

Changed:
{{{
odb/aux/curses.c
odb/aux/generic.c
odb/aux/memory.c
odb/aux/newio.c
odb/aux/odb2mysql.c
odb/aux/odbi_direct.c
odb/aux/qtar_sub.c
odb/aux/result.c
odb/aux/upcma.c
odb/cma2odb/create_averaged_values.F90
odb/cma2odb/shuffle_odb.F90
odb/compiler/memory.c
odb/compiler/odb_macros.h
odb/ddl/odb_macros.h
odb/extras/mpi_serial/cmpi.c
odb/extras/mpi_serial/mpi_buffer_attach.F
odb/include/odb_macros.h
odb/lib/evaluate.c
odb/lib/funcs.c
odb/lib/inside.c
odb/lib/symtab.c
odb/lib/vecloops.c
odb/module/odbshared.F90
odb/tools/b4.c
odb/tools/odbi_direct_main.c
}}}

== FULLPOS == 
=== FULLPOS fixes ===

Authors: Ryad El Khatib

svn changesets: 14418,14415

Description:
Two bugfixes to handle post-processed fields on isothermic level
Bugfix for BOYD

Changed:
{{{
arpifs/fullpos/sufpc.F90
arpifs/fullpos/suvpos.F90
arpifs/setup/suafn2.F9
}}}

=== Fullpos fix for RH interpolation ===

Authors: Ulf Andrae

Description:
    Add FPRHMAX to NAMFPC to allow supersaturated RH. Final value of FPRHMAX to be settled
    Correct inconsistency in RH limits in apache.F90 

svn changesets:13940

Changed:
{{{
arpifs/namelist/namfpc.nam.h
arpifs/pp_obs/apache.F90
}}}


== Technical ==
=== Correct string length for HREC argument ===

Authors: Trygve Aspelien

Description:
Sent to 41t1

svn changesets: 13578

Changed:
{{{
mse/internals/error_read.F90
mse/internals/error_write.F90
mse/internals/fmreadt0.F90
mse/internals/fmwritt0.F90
mse/internals/old_ndim.F90
mse/internals/read_in_lfi_x2.F90
mse/internals/read_in_lfi_x3.F90
mse/internals/read_surfc0_aro.F90
mse/internals/read_surfl0_aro.F90
mse/internals/read_surfl1_aro.F90
mse/internals/read_surfn0_aro.F90
mse/internals/read_surfn1_aro.F90
mse/internals/read_surft0_aro.F90
mse/internals/read_surft1_aro.F90
mse/internals/read_surfx0_aro.F90
mse/internals/read_surfx1_aro.F90
mse/internals/read_surfx2_aro.F90
mse/internals/write_in_lfi_x1.F90
mse/internals/write_in_lfi_x2.F90
mse/internals/write_in_lfi_x3.F90
mse/internals/write_surft0_aro.F90
}}}

=== Blacklist changes ===

Authors: Several

Description:
Not to be sent to phasing

Changed:
{{{
blacklist/mf_blacklist.b
}}}

=== Dr Hook updates ===

Authors: Sami Saarinen

Description: 
Sent to 41t1

svn changesets: 12842,12850

Changed:
{{{
ifsaux/include/drhook.h
ifsaux/module/dr_hook_watch_mod.F90
ifsaux/support/dr_hook_prt.F90
ifsaux/support/drhook.c
ifsaux/utilities/linuxtrbk.c
}}}

=== Remove SAMIO leftovers ===

Authors: Ulf Andrae, Eoin Whelan

Description:
Sent to 41t1

svn changesets: 12343

Changed:
{{{
ifsaux/lfi/lfiecc.F90
ifsaux/lfi/lfiedo.F90
ifsaux/lfi/lfilcc.F90
ifsaux/lfi/lfildo.F90
}}}

=== Correct coding norm violation ===

Authors: Ulf Andrae

Description:
Let's speak english

svn changesets:

Changed
{{{
ifsaux/lfi/lfiini.F90
}}}

=== Less verbose output ===

Authors: Ole Vignes

Description:
Sent to 41t1

svn changesets: 12741

Changed:
{{{
ifsaux/misc/facat.F90
mse/internals/fmlook.F90
}}}

=== Blacklist compiler fix ===

Authors: Sami Saarinen, Trygve Aspelien

Description:
Increase max length of line and correct possible "Buffer overflow" problem in blacklist compiler when line was too long.
Sent to 41t1

svn changesets: 13570

Changed:
{{{
blacklist/compiler/generate.c
blacklist/include/defs.h
}}}

=== Corrected memory diagnostics ===

Authors: Sami Saarinen

Description:
Sent to 41t1

svn changesets: 12842

Changed:
{{{
arpifs/utility/opdis.F90
ifsaux/utilities/gethwm.c
ifsaux/utilities/getrss.c
ifsaux/utilities/getstk.c 
}}}

=== Use correct variable ===

Authors: Ulf Andrae

svn changesets: 13578

Description:

Changed:
{{{
arpifs/op_obs/cloud_estimate.F90
}}}

=== use ec_getenv ===

Authors: Sami Saarinen

Description:

svn changesets: 12854

Changed:
{{{
arpifs/canari/canari.F90
arpifs/canari/casgra.F90
arpifs/obs_preproc/hatbiasc.F90
arpifs/obs_preproc/readoba.F90
arpifs/obs_preproc/sudimo.F90
arpifs/obs_preproc/tempin.F90
arpifs/var/writeoba.F90
arpifs/prism/couplo4_inimpi.F90
}}}

=== Add missing variable LGUSTBYPOS ===

Authors: Ulf Andrae

svn changesets: 14582

Changed:
{{{
arpifs/namelist/namxfu.nam.h
}}}

=== Lower JPFORC to fit with FA name conventions/grib  ===

Author Ulf Andrae:

Description:

svn changesets: 13578

Changed:
{{{
arpifs/module/yom_ygfl.F90
}}}

=== Write witness file for fullpos ===

Authors: Ulf Andrae

Description:

svn changesets: 13777

Changed:
{{{
arpifs/fullpos/wrhfp.F90
}}}

=== Make LSM visible for SURFEX ===

Authors: Trygve Aspelien

svn changesets: 12325

Changed:
{{{
arpifs/fullpos/sufptr2.F90
}}}

=== Changes to allow ODB1 to ODB2 conversion ===

Authors: Eoin Whelan

Descriptions:
Sent to 41t1

svn changesets: 13323

Changed:
{{{
odb/scripts/dcagen
}}}

=== Support for SURFEX lselect ===

Authors: Ulf Andrae, Patrick Samuelsson

Description:

svn changesets: 14252,14253

Changed:
{{{
arpifs/dia/wrmlppa.F90
arpifs/io_serv/io_serv_get_reqid.F90
arpifs/module/yomtag.F90
mse/externals/aro_surf_diag.F90
mse/externals/aro_surf_diagh.F90
mse/externals/wrsfx.F90
mse/interface/aro_surf_diag.h
mse/interface/wrsfx.h
surfex/SURFEX/modd_diag_surf_atmn.F90
surfex/SURFEX/modn_surf_atmn.F90
surfex/SURFEX/write_surf_atmn.F90
}}}


=== NTIMEFMT fixes ===

Authors: Philippe Marginaud

svn changesets: 14559

Changed:
{{{
src/arpifs/dia/suppdate.F90
}}}

=== Removed OpenMP statements ===

Authors: ?

svn changesets: ?

Description:
Removed due to problems in nested setup. Still problem?

Changed:
{{{
surfex/SURFEX/av_pgd.F90
}}}


=== Various technical corrections ===

Authors:Ulf Andrae,Niko Sokka

Description:
 - Correction of compilation warnings
 - Correct DR HOOK calls
 - Correct INTENT declarations
 - Breaking to long lines
 - Correct KIND declarations of constants like in 1._JPRB
 - Correct IVDEP directive locations 
 - Correct FORMAT statements
 - Correct INTERFACE statements

Sent to 41t1

svn changesets: 13578,12953,13449

Changed:
{{{
algor/internal/fourier/qpassf.F
algor/internal/fourier/rpassf.F
algor/internal/minim/mlis0r.F
arpifs/adiab/cpg5_gp.F90
arpifs/adiab/cpg_dyn.F90
arpifs/adiab/cpg_gp.F90
arpifs/adiab/cpg_gpb_nhgeogw.F90
arpifs/adiab/lacdyn.F90
arpifs/adiab/laconead.F90
arpifs/adiab/lavent.F90
arpifs/adiab/postphy.F90
arpifs/canari/caspia.F90
arpifs/chem/chem_mocage.F90
arpifs/chem/chem_mozart.F90
arpifs/chem/tm5_chem_ini.F90
arpifs/fullpos/fpsampl.F90
arpifs/module/varbc_airep.F90
arpifs/module/varbc_pred.F90, But not the change of zplev
arpifs/module/varbc_rad.F90
arpifs/module/varbc_tcwv.F90
arpifs/module/varbc_to3.F90
arpifs/obs_preproc/radar_profs.F90
arpifs/op_obs/kernel_pbp_ad.F90
arpifs/op_obs/slint.F90
arpifs/phys_dmn/acconvsad.F90
arpifs/phys_dmn/aclspsad.F90
arpifs/phys_dmn/acnebsmad.F90
arpifs/phys_dmn/acnuagesad.F90
arpifs/phys_ec/cloud_layer.F90
arpifs/phys_ec/convection_layer.F90
arpifs/phys_ec/convection_s_layer.F90
arpifs/phys_ec/cuadjtq.F90
arpifs/phys_ec/cubasmcn.F90
arpifs/phys_ec/cuflxn.F90
arpifs/phys_ec/cumastrn.F90
arpifs/phys_ec/sltend_layer.F90
arpifs/phys_ec/turbulence_layer.F90
arpifs/phys_ec/vdfmain.F90
arpifs/setup/suvert.F90
arpifs/var/jbtomodelad.F90
etrans/module/eprfi2b_mod.F90
etrans/module/euvtvd_comm_mod.F90
etrans/module/euvtvd_mod.F90
etrans/module/suemplatb_mod.F90
ifsaux/support/isrcheq.F
ifsaux/support/isrchfltpv.F
ifsaux/support/qsorti4.F
mse/new/sfxlfi2fa.F90
odb/extras/emos/bugbts.F
odb/module/binterpol.F90
odb/module/odb1.F90
odb/pandor/extrtovs/extr_lib_1c.F90
odb/pandor/fcq/man_orders.F90
satrad/bias/getbccoef.F90
surf/module/ocean_ml_driver_v2_mod.F90
surf/module/srfsn_rsn_mod.F90
surf/module/tridag_mod.F90
surfex/ASSIM/oi_latlon_conf_proj.F90
surfex/OFFLIN/mode_read_surf_ol.F90
surfex/SURFEX/bem.F90
surfex/SURFEX/coupling_seawat_sbln.F90
surfex/SURFEX/default_teb_veg.F90
surfex/SURFEX/init_from_data_greenroofn.F90
surfex/SURFEX/init_veg_gardenn.F90
surfex/SURFEX/init_veg_pgd_gardenn.F90
surfex/SURFEX/init_veg_pgdn.F90
surfex/SURFEX/mode_sltmbl.F90
surfex/SURFEX/mode_splines.F90
surfex/SURFEX/mode_write_surf_fa.F90
surfex/SURFEX/read_gridtype_cartesian.F90
surfex/SURFEX/teb_morpho.F90
trans/module/updspbad_mod.F90
utilities/bcov_lam/others/sbdiacov.F90
utilities/ctpini/module/fonctions_donnees.F90
}}}

=== ODB fixes ===

Authors: Sami Saarinen

Description:
Use ec_getenv rather than getenv
Sent to 41t1

svn changesets: 12854

Changed:
{{{
arpifs/canari/canari.F90
arpifs/canari/casgra.F90
arpifs/obs_preproc/hatbiasc.F90
arpifs/obs_preproc/readoba.F90
arpifs/obs_preproc/sudimo.F90
arpifs/obs_preproc/tempin.F90
arpifs/var/writeoba.F90
}}}

=== Customizing Blend ===

Authors: Ulf Andrae, Trygve Aspelien, Ole Vignes

Description:

svn changesets: 14026,14030,14036,9414,7973

Changed:
{{{
aladin/programs/blend.F90
aladin/programs/blendsur.F90
}}}

=== Observation monitoring ===

Authors: Trygve Aspelien

Description:
mandalay.sql can be removed!!!!!!!!!!!

svn changesets:

New:
{{{
odb/ddl.CCMA/mandalay.sql
odb/ddl.CCMA/obsmon_conv.sql
odb/ddl.CCMA/obsmon_conv2.sql
odb/ddl.CCMA/obsmon_sat.sql
odb/ddl.ECMA/mandalay.sql
odb/ddl.ECMA/obsmon_conv.sql
odb/ddl.ECMA/obsmon_conv2.sql
odb/ddl.ECMA/obsmon_sat.sql
odb/ddl/mandalay.sql
odb/ddl/obsmon_conv.sql
odb/ddl/obsmon_conv2.sql
odb/ddl/obsmon_sat.sql
}}}


=== Change name of file ===

Authors: Ulf Andrae

Description:

svn changesets:

New:
{{{
utilities/bcov_lam/programs/festat.F90
}}}

Removed:
{{{
utilities/bcov_lam/programs/stat.F90
}}}

== SURFEX ==
=== SURFEX lfi2fa translations ===

Authors: Several

Description:

svn changesets: 14357,13976

Changed:
{{{
mse/module/sfxflddesc_mod.F90
}}}

=== SURFEX orography fix ===

Authors: Ulf Andrae & Yann Seity :

Description:
Adjust max difference between atm and surfex orography. 

svn changesets: 13903

Changed:
{{{
mse/externals/aro_ground_param.F90
}}}

=== Make LMSE_CC01 dependent on LMSE ===

Authors: Ulf Andrae

Description:

svn changesets: 14266

Changed:
{{{
arpifs/utility/updtim.F90
}}}


=== New namelist file ===

Authors: Rimvudas Jasinskas

Description:
Add surfex file to enable netcdf (-DNC) compilations.
Sent to 41t1

New:
surfex/OFFLIN/close_namelist_nc.F90

=== SSO fix ===

Authors: Ulf Andrae

Description: The change is inspired by changes done in surfex v7.3 
Limit minimum sso roughness length in case of CROUGH=Z01D to avoid division by zero

svn changesets: 12984

Changed:
{{{
surfex/SURFEX/z0rel_1d.F90
}}}

=== PREP changes ===

Authors: Mariken Homleid & Ulf Andrae,Jakob Sueld & Trygve Aspelien:

Description:
Add handling of GRIB2 ECMWF orography in PREP
Import needed change from later SURFEX version to be able to run PREP from one LFI file to another. Needed when input and output domain sizes are not equal.
Partly sent to 41t1

svn changesets:13914

Changed:
{{{
surfex/SURFEX/modd_grid_grib.F90
surfex/SURFEX/mode_read_grib.F90
surfex/SURFEX/prep_snow_extern.F90
}}}

=== Avoid SIGFPE trapping by DR_HOOK ===

Authors: Ulf Andrae

Description:
Replace WHERE statement with IF to avoid SIGFPE due to evaluation of missing data. 

svn changesets: 12412

Changed:	
{{{
surfex/SURFEX/mode_read_extern.F90
}}}

=== Extrapolation in prep and OI_main ===

Authors: Ulf Andrae,Trygve Aspelien

Description:
Add NDIM_EXTRAP to allow different search radius
Make extrapolation search limit available in namelist through NDIM_EXTRAP
The default vaule is set to 20 to reproduce the old result for the DKCOEXP domain 

svn changesets:12739,12779

Changed:
{{{
surfex/ASSIM/oi_hor_extrapol_surf.F90
surfex/SURFEX/default_prep_isba.F90
surfex/SURFEX/modd_prep_isba.F90
surfex/SURFEX/modn_prep_isba.F90
surfex/SURFEX/prep_isba_buffer.F90
surfex/SURFEX/prep_snow_buffer.F90
}}}

=== SICE ===

Authors: Yurii Batrak

Description:
Introduce simple ice temperature scheme

svn changesets: 14357

Changed:
{{{
surfex/ASSIM/assim_sean.F90
surfex/OFFLIN/init_outfn_sean.F90
surfex/SURFEX/coupling_seafluxn.F90
surfex/SURFEX/default_seaflux.F90
surfex/SURFEX/diag_inline_seafluxn.F90
surfex/SURFEX/diag_seaflux_initn.F90
surfex/SURFEX/diag_seafluxn.F90
surfex/SURFEX/diag_surf_budgetc_sea.F90
surfex/SURFEX/ecume_seaflux.F90
surfex/SURFEX/init_seafluxn.F90
surfex/SURFEX/modd_diag_seafluxn.F90
surfex/SURFEX/modd_prep_seaflux.F90
surfex/SURFEX/modd_seafluxn.F90
surfex/SURFEX/mode_read_grib.F90
surfex/SURFEX/modn_prep_seaflux.F90
surfex/SURFEX/modn_seafluxn.F90
surfex/SURFEX/prep_grib_grid.F90
surfex/SURFEX/prep_grid_extern.F90
surfex/SURFEX/prep_hor_seaflux_field.F90
surfex/SURFEX/prep_seaflux.F90
surfex/SURFEX/prep_seaflux_extern.F90
surfex/SURFEX/prep_seaflux_grib.F90
surfex/SURFEX/put_rad_sean.F90
surfex/SURFEX/read_default_seafluxn.F90
surfex/SURFEX/read_namelists_seafluxn.F90
surfex/SURFEX/read_seaflux_confn.F90
surfex/SURFEX/read_seafluxn.F90
surfex/SURFEX/soil_heatdif.F90
surfex/SURFEX/update_rad_seawat.F90
surfex/SURFEX/write_diag_seb_seafluxn.F90
surfex/SURFEX/writesurf_seafluxn.F90
}}}

New:
{{{
surfex/SURFEX/abstract_ice.F90
surfex/SURFEX/abstract_model.F90
surfex/SURFEX/abstract_snow.F90
surfex/SURFEX/avg_drag.F90
surfex/SURFEX/coupling_sea_ice.F90
surfex/SURFEX/default_ice.F90
surfex/SURFEX/e3L_snow.F90
surfex/SURFEX/lin_space.F90
surfex/SURFEX/mode_ice_albedo.F90
surfex/SURFEX/modn_simpl_ice.F90
surfex/SURFEX/nn_extrapolate.F90
surfex/SURFEX/set_grid.F90
surfex/SURFEX/signed_distance_field.F90
surfex/SURFEX/simple_ice.F90
surfex/SURFEX/snow3l_73.F90
surfex/SURFEX/theoretic_snow.F90
}}}

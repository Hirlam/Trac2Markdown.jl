[[PageOutline]]
[[Center(begin)]]
= '''Potential updates for tagging HARMONIE-40h1.2''' =

Last modified [[LastModified]]

[[Center(end)]]

This page is a working document for the development going from harmonie-40h1.1 to harmonie-40h1.2. Please check [wiki:Harmonie_40h1/validation_for_tagging_40h1.2 Validation for tagging HARMONIE-40h1.2] for a list of suggested tests and for experiments and corresponding verification.

The HIRLAM Management Group (MG) have discussed potential updates for cycle 40h1.2 in order to improve, in particular, the poor T2m temperatures and clouds seen over the IBERIA domain during winter with cycle 40h1.1 (in comparison to cycle 38h1.2). The following ongoing developments could potentially enter cycle 40h1.2, which we would like to start testing over the RCR domains. 

The development is now organised in tables to clarify responsibility of different people and the status of e.g. scientific documentation, documentation needed for trunk submission, and connections to tests.

== Upper air physics and dynamics ==

=== Intended for next cycle ===

||='''Development'''              =||='''Default/''' =||='''Developers'''   =||='''System group'''    =||='''Status'''  =||='''Documentation''' =||='''Documentation'''     =||='''Tests'''       =||
||='''name'''                     =||='''optional''' =||=                   =||='''representative'''  =||=              =||='''scientific'''    =||='''trunk'''             =||=                  =||
||=PL responsible to add          =||=               =||=PL responsible to  =||=Daniel adds           =||=Daniel and PL =||=Main developer      =||=On request from Daniel  =||=Bent coordinates  =||
||=                               =||=               =||=add at least one   =||=                      =||=responsible   =||=                    =||=                        =||                   =||
||
||Freezing rain update             ||Default         ||Karl-Ivar Ivarsson    ||                       || Submitted to trunk   || see comments ||                     
||Bug fixes stratospheric warming  ||Default         ||Karl-Ivar Ivarsson    ||                       || Submitted to trunk   || see comments ||   
||Accretion changes                ||Default         ||Karl-Ivar Ivarsson    ||                       || Submitted to trunk   || see comments ||   
||COMAD                            ||Default         ||Sylvie Malardel       ||                       || activated COMAD=TRUE in trunk || see comments ||   
||conversion of graupel to snow    ||Optional        ||Karl-Ivar Ivarsson    ||                       || Submitted to trunk, with original namelist flag LGRSN removed, [[br]] instead controled by namelist parameters similar [[br]] to that of the freezing rain updates upon discussion with Meto-France. [[br]]. Default not activated. || see comments  ||
||Improved microphysics in EDMF    ||Optional        ||Lisa Bengtsson        ||                       || Submitted to trunk LTOTPREC = FALSE ||                                                                                         see comments  ||


'''Comments'''
 * COMAD: See documentation http://onlinelibrary.wiley.com/doi/10.1002/qj.2509/abstract It is an improvement of the interpolations weights in the semi-Lagrangian scheme. The impact is small, but it improves so called "grid-point storms" seen in the model with excessive build up of graupel in individual grid-boxes.
 * LGRSN flag: (conversion of graupel to snow, when mixing ratio of graupel is very small.). Included as optional
 * Freezing rain update: Higher thresholds for graupel,snow and ice nucleus concentration for permitting  conversion of  supercooled rain into snow or graupel. Thus, this conversion goes slower, and more supercooled rain remains. 
 * Bug fixes for stratospheric warming: In the stratosphere, saturation pressure over.e.g. ice may become higher than the atmospheric pressure. In those cases, saturation mixing ratio may be infinite and cause division by zero. Since  condensation is not possible when saturation pressure exceeds atmospheric pressure, the bug fix is just to turn of the calculations in those cases.
 * Accretion changes: In cy38 the accretion of cloud water into rain was made dependent of cloud droplet size in order to make it more physically realistic. Unfortunately, this was not completely integrated into cy40. This is fixed for cy40h1.2.
 * Improved microphysics in EDMF: Flag to activate, LTOTPREC: With LTOTPREC=TRUE precipitation tendencies that are computed in the shallow convection scheme are added to the source terms of precipitation entering the cloud microphysics, such that they are advected before the next time-step. This is in order to enhance convective preciptation advecting in over the coast when generated at sea. If LTOTPREC=FALSE there is no impact of the modification in the model.


=== Under development ===

||='''Development'''     =||='''Developers'''   =||='''System group'''    =||='''Status'''  =||='''Documentation'''          =||='''Tests''' =||
||='''name'''            =||=                   =||='''representative'''  =||=              =||='''scientific'''             =||=             =||
||=PL responsible to add =||=PL responsible to  =||=Daniel adds           =||=Daniel and PL =||=Main developer               =||=Bent coordinates  =||
||=                      =||=add at least one   =||=                      =||=responsible   =||=                             =||=                   =||


== Surface ==

=== Intended for next cycle ===

||='''Development'''      =||=Default/   =||='''Developers'''   =||='''System group'''    =||='''Status'''                   =||='''Documentation'''  =||='''Documentation'''  =||='''Tests''' =||
||='''name'''             =||=optional   =||=                   =||='''representative'''  =||=                               =||='''scientific'''     =||='''for trunk'''      =||
||=PL responsible to add  =||=           =||=PL responsible to  =||=Daniel adds           =||=Daniel and PL                  =||=Main developer       =||=                     =||=Bent coordinates  =||
||=                       =||=           =||=add at least one   =||=                      =||=responsible                    =||=                     =||=                     =||=                   =||
||SICE                     ||default      ||Yurii                ||NN                     ||In trunk, should be set to true  ||[https://hirlam.org/trac/wiki/SURFEX-ice wiki] || -   ||   -  ||
||PGD interpolation bug    ||default      ||Ekaterina            ||Daniel                  
||noSBL                    ||default      ||Mariken              ||Namelist option
||Smoothing of orography   ||default      ||                     ||Namelist option
||2 patches                ||optional     ||Patrick, Trygve      ||NN                   ||Testbed completed. Branch ready to be reintegrated   ||[https://hirlam.org/trac/wiki/HarmonieWorkingWeek/Surface201604/Two_patches_development wiki] || - ||[https://hirlam.org/trac/wiki/Harmonie_40h1/validation_for_tagging_40h1.2#Surface Surface] ||
||FLake                    ||optional     ||Ekaterina            ||Niko?                   ||Branch to go through testbed     ||   ||   ||[https://hirlam.org/trac/wiki/Harmonie_40h1/validation_for_tagging_40h1.2#Surface Surface]  ||

'''Comments'''
 * PGD interpolation bug: Bug fix by Katya related to interpolation of all physiography fields in PGD. This bug fix excludes the impact of NHALO in SURFEX which decides how far away SURFEX should look for physiography information when the physiography input field is coarse wit respect to the model grid. 
 * noSBL:  set LISBA_CANOPY=".FALSE." (as a comment, also required for NPATCH=2 ). The value of LCANOPY_DRAG (drag activated in SBL scheme within the canopy) has no meaning when LISBA_CANOPY=".FALSE.".
 * Smoothing of orography: Remove smoothing of orography in PGD. This is related to namelist NAM_ZSFILTER in SURFEX where the default namelist setting NZSFILTER=1 means that 1 iteration of the spatial filter applied to smooth the orography is applied. This has been an unknown setting for a while and we wish to have smoothing done only in the atmosphere part of the code. Thus, new setting should be NZSFILTER=0.
 * SICE documentation can be found on page 24 here: http://journals.ametsoc.org/doi/pdf/10.1175/MWR-D-16-0417.1


=== Under development ===

||='''Development'''      =||='''Developers'''  =||='''System group'''    =||='''Status'''   =||='''Documentation'''           =||='''Tests''' =||
||='''name'''             =||=                  =||='''representative'''  =||=               =||='''scientific'''              =||=             =||
||=PL responsible to add  =||=PL responsible to =||=Daniel adds           =||=Daniel and PL  =||=Main developer                =||=Bent coordinates  =||
||=                       =||=add at least one  =||=            =||=responsible   =||=                              =||=                   =||
||EKF for 2 patches        ||Patrick, Trygve     ||NN                     ||Not started yet   ||  -  || - ||

== Upper-air data assimilation ==

=== Implementation of observations ===

||='''Development'''      =||=Default/   =||='''Developers'''   =||='''System group'''    =||='''Status'''                   =||='''Documentation'''  =||='''Documentation'''  =||='''Tests''' =||
||='''name'''             =||=optional   =||=                   =||='''representative'''  =||=                               =||='''scientific'''     =||='''for trunk'''      =||
||=PL responsible to add  =||=           =||=PL responsible to  =||=Daniel adds           =||=Daniel and PL                  =||=Main developer       =||=                     =||=Roger coordinates  =||
||=                       =||=           =||=add at least one   =||=                      =||=responsible                    =||=                     =||=                     =||=                   =||
||ATOVS  implementation    ||Optional, operational   ||Joan, Maria, Sigurdur, Jana, Roger   ||Roger                     ||available from 38h1.2?      ||[https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/ObservationHowto/Atovs ATOVS HowTo] || -   ||   -  ||
||IASI  implementation     ||Optional, operational     ||Roger                ||Roger                     ||available from 38h1.2?      ||       || -   ||   -  ||
||AMV  implementation      ||Optional, operational     ||Roger                ||Roger, Eoin                ||available from 38h1.2?      ||[https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/ObservationHowto/Amv AMV HowTo]       ||  -   ||   -  ||
||Seviri  implementation   ||Optional     ||Magnus                ||Magnus                ||available from 38h1.2?      ||[https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/ObservationHowto/Amv AMV HowTo]|| -   ||   -  ||
||GNSS ZTD  implementation ||Optional, operational     ||Jana, Magnus, Sigurdur           ||Magnus                ||available from 38h1.2?      ||[https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/ObservationHowto/GNSS GNSS ZTD HowTo]  ||  -   ||   -  ||


=== Development of data assimilation scheme and procedures ===

||='''Development'''      =||=Default/   =||='''Developers'''   =||='''System group'''    =||='''Status'''                   =||='''Documentation'''  =||='''Documentation'''  =||='''Tests''' =||
||='''name'''             =||=optional   =||=                   =||='''representative'''  =||=                               =||='''scientific'''     =||='''for trunk'''      =||
||=PL responsible to add  =||=           =||=PL responsible to  =||=Daniel adds           =||=Daniel and PL                  =||=Main tester/developer       =||=                     =||=Roger coordinates  =||
||=                       =||=           =||=add at least one   =||=                      =||=responsible                    =||=                     =||=                     =||=                   =||
||Cycling strategy: 6h vs 3h   ||Optional, operational   ||Roger   ||Roger                     ||available for all cycles      || - || -   ||   -  ||
[[PageOutline]]
[[Center(begin)]]
= '''Release notes of HIRLAM 7.0''' =
[[LastModified]]
[[Center(end)]]

== Highlights of 7.0 ==

Hirlam 7.0 is an official release. Apart from a few minor technical updates, it is equal to Hirlam 7.0 rc1. On meteorological aspect, it is equivalent to the release 6.4.4. 

Hirlam 7.0 features following main modifications to the reference configurations in the previous Hirlam official release 6.4:
 * Re-forecast procedure at main synoptic hour to utilize the large scale analyses to improve model background state
 * Reduced scaling of the background error structure function
 * Assimilation of AMSU-A observation data
 * Modified stomatal resistence, leaf area index, vegetation index and vegetation dependent roughness
 * Removal of revision control from the reference script set
 * Improved diagnosis of the 2-meter relative humidity
 * Improved post-processing for mean sea level pressure and upper air geopotential
 * A reduction of memory use in semi-lagrangian advection subroutines
 * Relocation of climate generation input data (HDF files)
 * Less memory usage for HGS servers

== Description of the changes ==

HIRLAM 7.0 official release contains minor, technical code and script updates relative to the previous version, 7.0rc1. Detailed listing of the technical changes in the source code and scripts can be found in [https://hirlam.org/trac/wiki/CodeUpdate#a7.0released2006.05.02 the code update summary page] for 7.0. These, together with features and bug corrections introduced in releases 6.4.2, 6.4.3, 6.4.4, 7.0beta1 and 7.0 rc1, provide many meteorological and technical improvements over the previous official version, 6.4. The main features are listed as following:

 * __Coupling method__, featured since Hirlam 6.4.4. A re-forecast procedure is introduced, following similar practices used in DMI, met.no and KNMI. The purpose of the re-forecast is to utilize late-arriving, high quality ECMWF analyses and forecasts in a re-forecast for previous cycle of the HIRLAM synoptic-scale operational system, so as to improve quality of the background fields, especially in terms of representation of large scale features;
 * __Reduced background error scaling__, featured since Hirlam 6.4.2. A reduction of the specified background error statistics so that effectively less weight is given to observation in 3D-VAR minimization;
 * __Assimilation of ATOVS AMSU-A data__, featured since Hirlam 6.4.4;
 * __Other technical aspects__.
    * A reduction of memory use in semi-lagrangian advection subroutines, introduced in Hirlam 7.0rc1
   * Relocation of climate generation input data (HDF files) to {{{ec:/hirlam/dat/hdfdb-7.0}}} and the related script change, introduced in Hirlam 7.0rc1
   * Elimination of race condition in the re-forecast and 4D-VAR scenario, introduced in Hirlam 7.0rc1
   * Less memory usage for HGS servers, introduced in Hirlam 7.0rc1
   * Adjustment to the increased vertical resolution in the ECMWF model, introduced in Hirlam 6.4.4
   * Updated time correction for individual TEMP station, corrected in Hirlam 6.4.4
   * Modified postprocessing for PMSL, geopotential, introduced in Hirlam 6.4.3
   * Improved diagnosis of 2m relative humidity, introduced in Hirlam 6.4.2
   * Reference boundary strategy changed from "analysis-only" to "operational", introduced in Hirlam 6.4.4
In addition, 7.0 contains many important corrections and modifications to the source codes and scripts, especially those related to the non-default 4D-VAR analysis option.
   * __4DVAR__: introduction of lateral boundary control algorithm; a large number of script changes involving configuration, options which enables a wide range of 4D-VAR experiments; 4D-VAR bug corrections, introduced in Hirlam 6.4.4, Hirlam 7.0beta1 and Hirlam 7.0rc1
   * __Subversion revision control system__, featured since Hirlam 7.0beta1. Subversion is introduced to replace CVS
   * __Removal of revision control feature in job script__, featured since Hirlam 7.0rc1. Removal of revision control from the reference script set to improve system portability;
   * __Assimilation of land SYNOP 10 m wind observation__using whitelist, introduced in Hirlam 6.4.4
   * __Modification on assimilation of GPS-slant delay data__, introduced in Hirlam 6.4.4

== Meteorological and Technical Evaluations ==

From the meteorological point of view, [https://hirlam.dmi.dk/trac/wiki/TestEvaluation7.0 validation study] of versions after 6.4.4 for two winter months, Dec 2005 and Jan 2006, and two summer months, July and Aug 2005, conducted at ECMWF by Xiaohua Yang and Kalle Eerola, respectively, have demonstrated a clear advantage of the new releases, in terms of root-mean-square scores of almost all key parameters, when compared to the equivalent results for 6.4.1 (the de facto official release 6.4). At FMI, a two-month real time, pre-operational RCR beta-suite based on 6.4.4 have been [http://fminwp.fmi.fi/visuhir_V644/ monitored] daily since March 2, 2006, and the verification of the beta-suite compares favourably against the operational suite based on 6.4. In the FMI-RCR test, the superiority of the new version is also clear in field verification for the surface pressure forecast. Note that the performance gain of the FMI-RCR with the new suite is also attributed to a corrected optimization setting for the FMI HPC platform.

Technical tests of the new versions have also been conducted, primarily ECMWF, FMI and Linux playforms. The details of which can be seen in the [https://hirlam.org/trac/wiki/TestEvaluation7.0#TechnicalEvaluation 7.0 technical test page] on Hirlam system wiki.

== Changes in the source libraries ==

See the [https://hirlam.org/trac/wiki/CodeUpdate#a7.0 detailed listing] in the Hirlam system wiki.

== Outstanding problems, bugs ==

 * There is an apparent forecast module reproducibility problem on various aspects. It has been observed that forecast results vary, at various degrees, depending on platform, optimization level, number of PEs, domain decomposition, etc. At this stage, on ECMWF and FMI HPC platforms, the code reproducibility is judged to be acceptable provided appropriate optimization level is chosen. Users are encouraged to report problems and share experiences on the developers forum dev@hirlam.org. For operational centers, it is highly recommened to perform platform equivalency test between the reference ECMWF-IBM platform and the local super-computer platform, and between various configurations on local platforms. Please also share your results with the community.
 * On ECMWF-ecgate, the start-up compilation sometimes crashes but it normally manages again at more tries. This is believed to be associated with the Fortran compilers at the ECMWF-IBM platforms
 * A script deficiency for combined scenario of 4D-VAR and LSMIX needs fix.

== Acknowledgement ==

'''Code test'''
 * Xiaohua Yang and Toon Moene performed simple technical tests on the ECMWF and !LinuxPc platform for this release.

'''Source code management'''
 * Tomas Wilhelmsson committed the changes to the Subversion repository.


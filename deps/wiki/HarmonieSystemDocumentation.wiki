[[PageOutline]]
[[Center(begin)]]
= '''Harmonie System Documentation''' =
[[Center(end)]]
== Documentation by version ==
 * [wiki:HarmonieSystemDocumentation/40h1.1.1 HarmonieSystemDocumentation/40h1.1.1]
 * [wiki:HarmonieSystemDocumentation/40h1.1 HarmonieSystemDocumentation/40h1.1]
 * [wiki:HarmonieSystemDocumentation/38h1.2 HarmonieSystemDocumentation/38h1.2]
 * [wiki:HarmonieSystemDocumentation/37h1.2 HarmonieSystemDocumentation/37h1.2]

== '''Overview''' ==
This page describes how to get started with harmonie-43h2, documentation of previous releases is available here: [wiki:HarmonieSystemDocumentation/PreviousVersions previous versions]

A high level overview of HARMONIE, (system content, programs and file formats used), is available in the links below:
 * [wiki:HarmonieSystemDocumentation/Content Harmonie content]: Summary of the HARMONIE system and its content - schedulers, scripts and source code and auxiliary software tools
 * [wiki:HarmonieSystemDocumentation/Binaries Binaries in HARMONIE]: Summary of HARMONIE programs 
 * [wiki:HarmonieSystemDocumentation/FileFormats File formats]: Information on file formats used by HARMONIE, input and outputs, including FA, GRIB, BUFR and ODB

[wiki:HarmonieSystemDocumentation/TrainingCourses Training Courses] also provide a useful overview of the HARMONIE system and its components.
== '''Tutorial''' ==
This is a "placeholder" for a beginners tutorial (possibly supplemented with a !YouTube video?)
 * Tutorial to test Harmonie on your PC
 * Tutorial to test Harmonie at ECMWF
== '''Quick start''' ==
=== ECMWF ===
Below are links on how to start running HARMONIE at ECMWF. There is also information on how to speed up your compilation on cca and information on how to use the ''Harmonie'' script
 * [wiki:HarmonieSystemDocumentation/Harmonie-mSMS Running Harmonie at ECMWF]: A guide to running your first Harmonie experiment at ECMWF
  * [wiki:HarmonieSystemDocumentation/Fast_start_on_cca Faster compilation on cca]: Information on how to compile Harmonie code more quickly on ECMWF's HPC platform, cca
 * [wiki:HarmonieSystemDocumentation/TheHarmonieScript The Harmonie script]: The ''Harmonie'' script and how to use it
 * [wiki:HarmonieSystemDocumentation/ModelDomain Model domain]: How to define a new model domain for your first experiment
Have a look at the [wiki:HarmonieSystemDocumentation#ExperimentConfiguration Experiment Configuration] section below on how to configure your HARMONIE experiment.
=== Local platform ===
Below are links on how the start running HARMONIE on your local platform. It is assumed that a valid host configuration has been made available to you. If you are really starting from scratch you should first look at the [wiki:HarmonieSystemDocumentation#Installation Installation] and [wiki:HarmonieSystemDocumentation#Downloadinputdata input data] sections.
 * [wiki:HarmonieSystemDocumentation/QuickStartLocal Running Harmonie]: A guide to running your first Harmonie experiment on your local platform
 * [wiki:HarmonieSystemDocumentation/TheHarmonieScript The Harmonie script]: The ''Harmonie'' script and how to use it
 * [wiki:HarmonieSystemDocumentation/ModelDomain Model domain]: How to define a new model domain for your first experiment
Have a look at the [wiki:HarmonieSystemDocumentation#ExperimentConfiguration Experiment Configuration] section below on how to configure your HARMONIE experiment.

== '''Installation''' ==
This section deals with installing HARMONIE on non-ECMWF platforms with some background information build system.
 * [wiki:HarmonieSystemDocumentation/General General software requirements]: Prepare your platform by installing software packages required by HARMONIE
  * [wiki:HarmonieSystemDocumentation/Redhat7Install Redhat 7]: specific software requirements/installation instructions for CentOS/Redhat 7 platforms
  * ~~[wiki:HarmonieSystemDocumentation/Centos6Install CentOS 6]: specific software requirements/installation instructions for CentOS 6 platforms~~. Please note: the version of gcc/gfortran available on CentOS/Redhat 6 platforms ((GCC) 4.4.7 !20120313 (Red Hat 4.4.7-16)) is not recent enough to compile harmonie-40h1.1. gcc/gfortran, netCDF and HDF5 must be installed locally.

 * [wiki:HarmonieSystemDocumentation/PlatformConfiguration Platform configuration]: A general description of required configuration files and a summary of those already available in HARMONIE.

 * The compiling package for HARMONIE source code is called ''Makeup''. ''GMKPACK'' used within ALADIN is no longer supported in Harmonie and has been removed asn an option in CY43h2.
  * [wiki:HarmonieSystemDocumentation/Build_with_makeup Compilation using Makeup]: How to compile HARMONIE source code using ''Makeup''
 * Source code CPP macros explained [https://hirlam.org/trac/attachment/wiki/HarmonieSystemDocumentation/cpp_macros.odt odt], [https://hirlam.org/trac/attachment/wiki/HarmonieSystemDocumentation/cpp_macros.pdf pdf]: Overview of cpp macros used in the source code of ARPEGE/IFS and ALADIN/AROME/HARMONIE - (CY36T1)

== '''Download input data''' ==
Before you can start running HARMONIE experiments some input data (external from the code repository) needs to be available on your platform. The input data contains physiography data, topography information and climatological values determined from a one year ARPEGE assimilation experiment with a resolution of T79.
  * [https://hirlam.org/portal/download/release-43h2.beta.3/E923_DATA-release-43h2.beta.3.tar.gz E923_DATA-release-43h2.beta.3.tar.gz]: Climate and physiography data for atmospheric climate generation (E923)
  * [https://hirlam.org/portal/download/release-43h2.beta.3/PGD-release-43h2.beta.3.tar.gz PGD-release-43h2.beta.3.tar.gz]: Physiography data for SURFEX (PGD)
  * [https://hirlam.org/portal/download/release-43h2.beta.3/GMTED2010-release-43h2.beta.3.tar.gz GMTED2010-release-43h2.beta.3.tar.gz]: Digital elevation model from [https://www.usgs.gov/ USGS]
  * [https://hirlam.org/portal/download/release-43h2.beta.3/SOILGRID-release-43h.beta.3.tar.gz SOILGRID-release-43h.beta.3.tar.gz]: Soil type data from [https://soilgrids.org/ SOILGRIDS]
  * [https://hirlam.org/portal/download/release-43h2.beta.3/sat_const-release-43h2.beta.3.tar.gz sat_const-release-43h2.beta.3.tar.gz] : Constants for satellite information
  * [https://hirlam.org/portal/download/release-43h2.beta.3/rttov7L54-release-43h2.beta.3.tar.gz rttov7L54-release-43h2.beta.3.tar.gz] : RTTOV constants
  * ECOCLIMAP second generation is available from [https://opensource.umr-cnrm.fr/projects/ecoclimap-sg/wiki here]. It's also available on {{{cca:/project/hirlam/harmonie/climate_in_order/ECOCLIMAP2G}}}
  * [https://hirlam.org/portal/download/testbed/testbed-release-43h2.beta.3.tar.gz Test data set with boundaries and observations for a small 50x50 domain]

== '''Experiment Configuration''' ==
This section provides information on how to configure your HARMONIE experiment: definition of input/output locations, how to assimilate observations, define forecast cycles, post-processing options and much more! For the expert user there is information on how model namelists are set up HARMONIE.
 * [wiki:HarmonieSystemDocumentation/ConfigureYourExperiment Configure your experiment] - setting of environment variables in [source:Harmonie/ecf/config_exp.h?rev=release-43h2.beta.3 ecf/config_exp.h] explained
 * [wiki:HarmonieSystemDocumentation/Namelists Finding the right namelist]: more details on the namelist settings in HARMONIE (if you are prepared to get your hands dirty!)

== '''Suite management''' ==
From cy43h2 ecflow is the only supported scheduler. Read more about the changes below.

 * [wiki:HarmonieSystemDocumentation/PruningOfmSMS Pruning of mSMS]
 * [wiki:HarmonieSystemDocumentation/ECFLOW Running Harmonie under ECFLOW]

== '''NWP Components''' ==
=== Domain definition ===
 * [wiki:HarmonieSystemDocumentation/ModelDomain Model domain]: Horizontal model domain information
 * [wiki:HarmonieSystemDocumentation/VerticalGrid Vertical grid]: Vertical model level definitions
=== Climate generation ===
  * [wiki:HarmonieSystemDocumentation/ClimateGeneration Climate Generation]
  * [wiki:HarmonieSystemDocumentation/How_to_use_hires_topography How to upgrade to high-resolution topography]
=== Initial/boundary data ===
   * [wiki:HarmonieSystemDocumentation/BoundaryFilePreparation Initial and Lateral Boundary Interpolation]
   * [wiki:HarmonieSystemDocumentation/PostPP/gl/Interpolation Interpolations with gl]
=== Observations ===
   * [wiki:HarmonieSystemDocumentation/UseofObservation Use of observations] ([wiki:HarmonieSystemDocumentation/UseofObservation?format=pdfarticle pdf]): selection of observation types and blacklisting using Bator
   * [wiki:HarmonieSystemDocumentation/ObservationPreprocessing Preprocessing of observation data] ([wiki:HarmonieSystemDocumentation/ObservationPreprocessing?format=pdfarticle pdf]): Introduction 
    * [wiki:HarmonieSystemDocumentation/ObservationPreprocessing/ObservationData ObservationData] ([wiki:HarmonieSystemDocumentation/ObservationPreprocessing/ObservationData?format=pdfarticle pdf]): Observation data
    * [wiki:HarmonieSystemDocumentation/ObservationPreprocessing/Oulan Oulan] ([wiki:HarmonieSystemDocumentation/ObservationPreprocessing/Oulan?format=pdfarticle pdf]): Oulan - extraction of conventional data and production of OBSOUL file read by BATOR
    * [wiki:HarmonieSystemDocumentation/ObservationPreprocessing/Bator Bator] ([wiki:HarmonieSystemDocumentation/ObservationPreprocessing/Bator?format=pdfarticle pdf]): Bator - preparation of ODBs used by data assimilation
    * [wiki:HarmonieSystemDocumentation/ObservationPreprocessing/Cope Cope] ([wiki:HarmonieSystemDocumentation/ObservationPreprocessing/Cope?format=pdfarticle pdf]): COPE - preparation of ODBs used by data assimilation - not available yet
   * Observation usage "how-tos":
     * [wiki:HarmonieSystemDocumentation/ObservationHowto/Amv Atmospheric motion vectors] ([wiki:HarmonieSystemDocumentation/ObservationHowto/Amv?format=pdfarticle pdf]): How to process and assimilate AMVs
     * [wiki:HarmonieSystemDocumentation/ObservationHowto/Atovs ATOVS radiances] ([wiki:HarmonieSystemDocumentation/ObservationHowto/Atovs?format=pdfarticle pdf]): How to process and assimilate ATOVS (AMSU-A and AMSU-B/MHS) radiances
     * [wiki:HarmonieSystemDocumentation/ObservationHowto/Scatt Scatterometer data] ([wiki:HarmonieSystemDocumentation/ObservationHowto/Scatt?format=pdfarticle pdf]): How to process and assimilate scatterometer observations
     * [wiki:HarmonieSystemDocumentation/RadarData (OPERA) radar data] ([wiki:HarmonieSystemDocumentation/RadarData?format=pdfarticle pdf]): Assimilate OPERA (HDF5) radar data
     * [wiki:HarmonieSystemDocumentation/ObservationHowto/GNSS GNSS ZTD data] ([wiki:HarmonieSystemDocumentation/ObservationHowto/GNSS?format=pdfarticle pdf]): How to process and assimilate GNSS ZTD data
     * [wiki:HarmonieSystemDocumentation/ObservationHowto/Modes Mode-S EHS data] ([wiki:HarmonieSystemDocumentation/ObservationHowto/Modes?format=pdfarticle pdf]): How to process and assimilate Mode-S EHS data

   * [wiki:HarmonieSystemDocumentation/StandaloneOdb ODB: software, data and visualization] ([wiki:HarmonieSystemDocumentation/StandaloneOdb?format=pdfarticle pdf])

=== Data Assimilation ===
   * [wiki:HarmonieSystemDocumentation/Analysis/SurfaceAnalysis Surface Data Assimilation] ([wiki:HarmonieSystemDocumentation/Analysis/SurfaceAnalysis?format=pdfarticle pdf])
   * 3D-VAR:
    * [wiki:HarmonieSystemDocumentation/Structurefunctions_ensys Structure functions]: How to derive structure functions on cca (at ECMWF) ([wiki:HarmonieSystemDocumentation/Structurefunctions_ensys?format=pdfarticle pdf])
    * [wiki:HarmonieSystemDocumentation/Screening Screening]: Quality control of observations task ([wiki:HarmonieSystemDocumentation/Screening?format=pdfarticle pdf])
    * [wiki:HarmonieSystemDocumentation/SingleObs_ensys Single observation test]: How to run a single observation test ([wiki:HarmonieSystemDocumentation/SingleObs_ensys?format=pdfarticle pdf])
    * [wiki:HarmonieDAWorkshop200805 DA working week 200805]: Information out of date now?
    * [wiki:HarmonieSystemDocumentation/ObservationOperators Observation operators (HOP_DRIVER)] ([wiki:HarmonieSystemDocumentation/ObservationOperators?format=pdfarticle pdf])
   * Assimilation diagnostics:
    * [wiki:HarmonieSystemDocumentation/MTEN MTEN]
    * [wiki:HarmonieSystemDocumentation/DFS DFS]
    * Observation impact diagnostics [https://hirlam.org/trac/attachment/wiki/HarmonieSystemDocumentation/DesroziersHarm.tar.gz]
    * [wiki:HarmonieSystemDocumentation/CHKEVO CHKEVO]: Diagnose forecast model spin-up of pressure

  * Impact of observation in data assimilation:
    * [wiki:ObsImpact Report on observation impact study in HARMONIE-AROME data assimilation]
  
  * Short and long term plan for data assimilation:
    * [wiki:data_assimilation_plan Selected tasks for data assimilation development]

=== Digitial Filter Initialization ===
 * [wiki:HarmonieSystemDocumentation/DigitialFilterInitialization Digitial Filter Initialization]: Brief description of how to use DFI in HARMONIE. (Not used by default)
=== Forecast Model ===
 * [wiki:HarmonieSystemDocumentation/Forecast Forecast model]: A description of the [source:Harmonie/scr/Forecast?rev=release-43h2.beta.3 Forecast script] and some of the more important namelist settings
 * [wiki:HarmonieSystemDocumentation/Forecast/Outputlist Model output]: Information on FA and GRIB output available from HARMONIE. (GRIB table information also included).
 * Forecast diagnostics:
  * [wiki:HarmonieSystemDocumentation/CHKEVO CHKEVO]: Diagnose forecast model spin-up of pressure

=== Ensemble prediction (HarmonEPS) ===
  * [wiki:HarmonieSystemDocumentation/EPS/Howto How to run an ensemble experiment]
  * [wiki:HarmonieSystemDocumentation/EPS/System Ensemble mode in the script system]
  * [wiki:HarmonieSystemDocumentation/EPS/BDSTRATEGY Available boundary strategies]
  * [wiki:HarmonieSystemDocumentation/EPS/Testperiods Available test periods for HarmonEPS]
  * [wiki:HarmonieSystemDocumentation/EPS/SLAF How to use SLAF]
  * [wiki:HarmonieSystemDocumentation/EPS/SurfacePerturbations Surface perturbations]
  * [wiki:HarmonieSystemDocumentation/EPS/Explist_paper List of experiments for HarmonEPS paper 2018]
  * [wiki:HarmonieSystemDocumentation/EPS/SPPT SPPT (under construction)]
  * [wiki:HarmonieSystemDocumentation/EPS/SPP SPP (under construction)]

=== Climate simulations (HCLIM) ===
  * [wiki:HarmonieSystemDocumentation/ClimateSimulation How to run a climate simulation]
  * [wiki:HarmonieClimate HARMONIE Climate]: communication of status, development and documentation of HARMONIE Climate (HCLIM)

=== Single column model (MUSC) ===
 * [wiki:HarmonieSystemDocumentation/MUSC MUSC]: Compile & run MUSC

== '''Postprocessing''' ==
 * [wiki:HarmonieSystemDocumentation/PostPP Postprocessing overview] 
   * [wiki:HarmonieSystemDocumentation/PostPP/FileConversions Convert data to GRIB]
   * [wiki:HarmonieSystemDocumentation/PostPP/Fullpos Postprocessing with FULL-POS]
   * [wiki:HarmonieSystemDocumentation/PostPP/gl_grib_api Postprocessing with gl_grib_api]
   * [wiki:HarmonieSystemDocumentation/PostPP/xtool Postprocessing with xtool_grib_api]
   * [wiki:HarmonieSystemDocumentation/PostPP/EPyGrAM Postprocessing with EPyGrAM]
   * [wiki:HarmonieSystemDocumentation/PostPP/Diagnostics Diagnostics]
   * [wiki:HarmonieSystemDocumentation/PostPP/Obsmon Obsmon]
 * [wiki:HarmonieSystemDocumentation/Calibration Calibration]

== '''Verification''' ==

 * [wiki:HarmonieSystemDocumentation/PostPP/Extract4verification Extract data for verification]
 * [wiki:HarmonieSystemDocumentation/PostPP/Verification Deterministic verification (monitor)]
 * [wiki:HARP Ensemble verification (HARP)]
 * [wiki:HirlamSystemDocumentation/PostPP/CommonVerification Multi-model Observation Verification Intercomparison]
 * [wiki:HarmonieSystemDocumentation/PostPP/Obsmon Observations monitoring]

== '''Visualization''' ==
 * [wiki:HarmonieSystemDocumentation/PostPP/EPyGrAM EPyGrAM at ecgate]

== '''System: For the hard core system staff''' ==
  * [wiki:HarmonieSystemDocumentation/UpdateNamelists Create new namelists]: How to create new namelists to be used by HARMONIE

  * [wiki:HarmonieSystemDocumentation/Evaluation/HarmonieTestbed Harmonie testbed]: The HARMONIE test environment used to test typical configurations on a small domain
  * [wiki:HarmonieSystemDocumentation/Development/ContributionForm Trunk contribution form]: Form to provide information to system people about new developments
  * [wiki:HarmonieSystemDocumentation/Phasing Phasing instructions]
   * [wiki:HarmonieSystemDocumentation/MFaccess Access to Météo-France servers]
   * [wiki:HarmonieSystemDocumentation/Evaluation/Mitraillette Mitraillette]
   * [wiki:HarmonieSystemDocumentation/ForwardPhasing Preparing HIRLAM contributions for Phasing]
  * [wiki:HarmonieSystemDocumentation/PhasingWithGit Phasing instructions with our git repository]

   * svn -> git
    * current svn working practice related to CY40 and CY43 [https://hirlam.org/trac/attachment/wiki/HarmonieSystemDocumentation/svn_working_practice.pdf]
    * about the (new) [wiki:HarmonieSystemDocumentation/SourceCodeRepository Harmonie source code repository]

  * [wiki:HarmonieSystemDocumentation/DrHook Profiling with DrHook]: ECMWF's profiling and traceback tool included in the code
  * [wiki:HarmonieSystemDocumentation/HarmonieBenchMark HARMONIE RAPS benchmark]
  * Meteo France/ECMWF 2011: [http://www.cnrm.meteo.fr/gmapdoc/spip.php?article213 Coding standards for ARPEGE-IFS]

  * [wiki:HarmonieSystemDocumentation/Scalability_and_Refactoring Scalability and refactoring]: Preliminary documents, presentations and links

  * Coordination documents
    * [http://www.cnrm.meteo.fr/aladin/spip.php?article219&lang=en OOPS & technical video meeting minutes]
    * [http://www.cnrm.meteo.fr/aladin/spip.php?article170&lang=en Coordination meeting minutes]
    * [http://www.cnrm.meteo.fr/aladin/spip.php?article124&lang=en Technical memorandums]

== '''Code browsers''' ==

  * [https://hirlam.org/codebrowser/ Code browsers (ftagshtml), 36h1.3, 37h1.1, 38h1.beta.1]
  * [https://hirlam.org/portal/doxygen_browser/cy36h1.4/ Doxygen code browser (36h1.4)]
  * [source:Harmonie Trac code browser]

== '''HARMONIE Reference materials''' ==

 * [http://www.cnrm.meteo.fr/gmapdoc/spip.php?rubrique1 ALADIN/Arome documentation]
 * [https://www.ecmwf.int/en/forecasts/documentation-and-support/changes-ecmwf-model/ifs-documentation IFS documentation]
 * [http://www.cnrm-game-meteo.fr/surfex/ SURFEX documentation]

----

[[Disclaimer]]

[[Center(begin)]]
[[Color(red, Last modified on)]] [[LastModified]]
[[Center(end)]]
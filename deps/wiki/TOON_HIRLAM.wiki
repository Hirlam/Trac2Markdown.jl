= TOON's HIRLAM =

== Purpose ==

To keep a check (both software-wise and meteorologically) on the development of (and possible errors in) the trunk of HIRLAM.

In time, I will do the same for HARMONIE (although, it missing a Reference, I'll have to choose a popular configuration instead).

== Source Version ==

This run is based on the trunk version of HIRLAM, updated roughly once a week.

Note: Running a trunk version means 4D Variational Analysis, Large Scale Mixing intermediate runs and Kain-Fritsch / Rasch-Kristianson convection/large-scale precipitation parametrization.

On the 20th of December 2009 (06 UTC) a cold start was necessary to be able to use the new trunk based on the newsnow branch.

== Run Time ==

It normally runs from 3:00 till 6:10 hours after observation time (not the strict time constraints typical for operational HIRLAMs).

== Model Configurations over Time ==

From the 12th of January 2009 until the 28th of September 2009 (00 UTC) it ran on a 406x324 grid of 0.2x0.2 degrees horizontally, 40 layers in the vertical; This was the grid definition used by KNMI operationally until the 17th of October 2006, i.e., 2 years and 3 months before the start of TOON's HIRLAM.

From the 28th of September 2009 (18 UTC) it runs on a 366x275 grid of 0.2x0.2 degrees horizontally, 40 layers in the vertical (KNMI had to reduce its operational grid to enable HIRLAM 7.2 to stay within the forecasting time window. As TOON's HIRLAM piggy-backs on the ECMWF Boundary Frames for that run, it had to scale back, too).

On the 6th of June, 2010, I had to turn off the machine to enable refurbishing the living room of my house.  Operations restarted at the 17th of July with a cold start.  A crash on the 20th of July forced a new cold start.

== View Model Output ==

Some simple time series from the run are visible [http://moene.org/~hirlam/ here], normally 8:10 hours after observation time and fields are shown [http://www.knmi.nl/~tijm/NEWSNOW/NSW.html here] 7:45 hours after observation time (courtesy of Sander Tijm); the latter delay is mostly due to getting the model output data over the Asymmetric Digital Subscriber Line in the wrong direction (i.e., upload).

== Hardware and Software ==

TOON's HIRLAM runs on a Core 2 Quad Core home computer with 4 Gbyte of RAM (9 Gbyte of SWAP) and 2 300 Gbyte hard drives, which cost around 1100 Euro's in December 2007.  The disk space means that this system stores around 2 weeks of HIRLAM forecasts, which can be useful in case a calamity occurs.

The operating system is Debian GNU/Linux Testing (updated weekly) with a recent version of GCC/gfortran trunk (until mid-2010 - nowadays I use a release version of GCC/gfortran) to recompile HIRLAM.

== GRIB 2 ==

On Friday, 8th of April 2011, I had to perform a cold restart due to the fact that my local internet connection had been non-functional for over a week while I was working at Meteo France in Toulouse (phasing Cycle 37 of IFS and HARMONIE).

I took the opportunity to use the GRIB 2 variants of the boundary dissemination for KNMI to test GRIBCONV.

When doing a cold start, HIRLAM has to start with an interpolated ECMWF boundary as a start file - this is a cruel test of any change in dissemination or local treatment of the boundary files.

The cold start was successful, and the run has passed its fourth 4DVAR analysis cycle using those boundaries.  After this I was convinced that I could change the operational runs at KNMI over to GRIB 2 boundaries too.

== Future Configurations ==

Given the development pace in hardware and software (compilers), I expect that by the end of 2011 I'll be able to run a 0.1x0.1 degree, 65 level HIRLAM on the same area as the current one.

The hardware will most probably use an 8-core "Sandy Bridge" processor and 24 Gbyte of RAM.  It will also make full use of the AVX vector instructions of that architecture and of the interprocedural analysis of GCC/gfortran 4.6+.

== Actual Upgrade ==

The above didn't turn out to be feasible.  An upgrade of my home system resulted in one with 32 Gbyte of RAM (enough to run a 726x550x60 0.1x0.1 degree HIRLAM), but the processor (i7-3770 3.4 Ghz) wasn't fast enough to deliver such a forecast in a reasonable time.

I settled for a 486x366x60 0.15x0.15 degree grid, which - with a 400 second time step, resulted in around 1 hour for a 4DVar analysis and 2:20 hours for a 48-hour forecast.

This run went into "operation" on the 7th of August 2012, replacing the 0.2x0.2 degree on 40 levels run.
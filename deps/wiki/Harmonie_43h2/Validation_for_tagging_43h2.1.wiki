[[PageOutline]]
[[Center(begin)]]
= '''Validation for tagging Harmonie-43h2.1'' =

Last modified [[LastModified]]

[[Center(end)]]

This page is a working document including the systematic tests and validation for experiments to reach harmonie-43h2.1 declaration. Please check [wiki:/Harmonie_43h2/Potential_updates_for_tagging_43h2.1  Potential_updates_for_tagging_43h2.1] for a background and explanations to what tests should be done.

The goal is to carry out tests in a coordinated way. In order to work towards this goal 
the following document has been created:     
[https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/common-verification-and-validation-of-Harmonie-CY43.pdf common-verification-and-validation-of-Harmonie-CY43 ]. It is recommended to read the document before starting experiments.   


== Targets ==

=== Description ===

The following table summarizes the main changes between targets:


||= Current develop  =||= Target 1 =||=  Target 2 =||= Reference cy40h1.1.1 =||
|| '''SURFEX''' || ||  ||  ||
|| CROUGH="NONE" || CROUGH="NONE" || CROUGH= "NONE" || CROUGH="NONE" ||
|| XRIMAX=0.0 || XRIMAX=0.0 || XRIMAX=0.0 || Not applicable (XRIMAX=0.0) ||
|| __Maintain Rsmin__ RSMIN_DECIDUOUS_FACTOR=1  RSMIN_CONIFEROUS_FACTOR=1  RSMIN_C3_FACTOR=1 RSMIN_C4_FACTOR=1  || __Increase Rsmin__ RSMIN_DECIDUOUS_FACTOR=1.5 RSMIN_CONIFEROUS_FACTOR=2.75  RSMIN_C3_FACTOR=3.0  RSMIN_C4_FACTOR=1.5 || __Increase RSMIN__ RSMIN_DECIDUOUS_FACTOR=1.5  RSMIN_CONIFEROUS_FACTOR=2.75  RSMIN_C3_FACTOR=3.0  RSMIN_C4_FACTOR=1.5 || Not applicable (i.e. no factors applied) ||
||OI coefficients for WG2 assimilation (POLYNOMES_ISBA) ||	Reduced OI coefficients for WG2 assimilation (POLYNOMES_ISBA_MF6) ||	Reduced OI coefficients for WG2 assimilation (POLYNOMES_ISBA_MF6) || Not applicable (POLYNOMES_ISBA) ||
|| ECOCLIMAP_VERSION=2.5_plus || ECOCLIMAP_VERSION=SG || ECOCLIMAP_VERSION=2.5_plus || ECOCLIMAP_VERSION=2.2 ||
|| XSCALE_H_TREE=1.0 || XSCALE_H_TREE=0.658 || XSCALE_H_TREE=1.0 || Not applicable (i.e. no scaling) ||
|| SOIL_TEXTURE_VERSION=FAO || SOIL_TEXTURE_VERSION=SOILGRID || SOIL_TEXTURE_VERSION=SOILGRID || SOIL_TEXTURE_VERSION=FAO ||
|| NPATCH=2 || NPATCH=2 || NPATCH=2 || NPATCH=1 ||
|| LISBA_CANOPY=".FALSE." || LISBA_CANOPY=".FALSE." || LISBA_CANOPY=".FALSE." || LISBA_CANOPY=".TRUE." ||
|| SURFEX_LAKES="FLAKE" || SURFEX_LAKES="FLAKE"  ||  SURFEX_LAKES="FLAKE" || SURFEX_LAKES="WATFLX" ||
|| SURFEX_SEA_ICE="sice" || SURFEX_SEA_ICE="sice" || SURFEX_SEA_ICE="sice" || SURFEX_SEA_ICE="sice" (default in 40h1.1.1 is none ||
|| '''MICROPHISYCS''' (Wim) || ||  || ||
|| STATNW = yes || STATNW = yes || STATNW = yes || Not available ||
|| '''MICROPHISYCS''' (Karl-Ivar) || ||  || ||
|| STATNW = yes || STATNW = yes || STATNW = yes || Not available ||
|| HGT_QS = no || HGT_QS = no || HGT_QS = no[[BR]](was intended to be =yes but was wrongly =no) || Not available ||
|| VSIGQSAT =  0.02 (relative humidity of 96%) || VSIGQSAT =  0.02 || VSIGQSAT =  0.02 || Not applicable (i.e. VSIGQSAT =  0.02) ||
|| RFRMIN(22)=1. || RFRMIN(22)=1. || RFRMIN(22)=0.5 || Not applicable (i.e. RFRMIN(22)=1.) ||
|| '''DATA ASSIMILATION ''' || || ||
|| Bator adaptations for cy43 ||  Bator adaptations for cy43 ||  Bator adaptations for cy43 || Not available ||
|| New blacklisting procedure based on ECMWF's || New blacklisting procedure based on ECMWF's||  New blacklisting procedure based on ECMWF's || Not available ||
|| RCT2SY=10 (T2M rejection limit in CANARI) || RCT2SY=10 || RCT2SY=10 || RCT2SY=10 (default in 40h1.1.1 is 3.9) || 

[https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Targets_report.pdf Here is a pdf describing some differences in physiography characteristics between targets 1 and 2 for the domains METCOOP, AEMET and KNMI].

=== Code base for experiments ===

For the CY43 targets two branches have been created as shown below. For the 40h1.1.1 reference it's very important to use the experiment example as the starting point.

||= Setup =||= git =||= Path at ECMWF =||= Experiment example setup =||
|| 40h111  ||  NA   || Do not use the default 40h1.1.1 || /home/ms/spsehlam/hlam/hm_home/40h111_ref ||
|| 43h2.target.1 || branch harmonie-43h2.target.1 || /home/ms/spsehlam/hlam/harmonie_release/git/branches/harmonie-43h2.1.target.1 ||  NA  ||
|| 43h2.target.2 || branch harmonie-43h2.target.2 || /home/ms/spsehlam/hlam/harmonie_release/git/branches/harmonie-43h2.1.target.2 ||  NA  ||

== Experiments ==

The Tables below will contain relevant information defining the individual experiments and their results  for Target 1 , Target 2 and comparisons to CY40h1.1.1 or similar :

=== 1. Long runs with forecast model ===

The verification presented in this table is constructed by the setup under ecgb:/scratch/ms/spsehlam/hlam/monitor_cy43_validation. The master script for running through all experiments is scr/Startme.[[BR]]

'''An interface to compare all experiments per season for a subset of the standard plots is available [https://hirlam.org/portal/smhi/harmonie-43h21_validation/All/ here]'''

||= Experiment name =||= Area specification =||= start to end time specification =||= Tester(country/$USER) =||=Additional , e.g. name list related =||= Verification link =|| 
|| DKA_SEP18_40h111[[BR]]DKA_SEP18_43h2tgt1[[BR]]DKA_SEP18_43h2tgt2   ||      DKA     ||18081400-18093000 || Kai Sattler (dk/nhk) || spinup included || [https://hirlam.org/portal/smhi/harmonie-43h21_validation/DKA_SEP18/ Validation page] ||  
|| DKA-DEC18   ||      DKA     ||18111400-18123100 || Kai Sattler (dk/nhk) || spinup included ||       -       || 
|| DKA-MAR19   ||      DKA     ||19021400-19033100 || Kai Sattler (dk/nhk) || spinup included ||       -       ||  
|| DKA-JUN19   ||      DKA     ||19051400-19063000 || Kai Sattler (dk/nhk) || spinup included ||       -       || 
|| KNMI_D18J19_ref[[BR]]KNMI_D18J19_tg1[[BR]]KNMI_D18J19_tg2 || Netherlands  ||18112000-19020100 || Toon (nl/nkc)[[BR]]John (nl/nll)[[BR]]Wim (nl/nli) || spinup included || [https://hirlam.org/portal/smhi/harmonie-43h21_validation/NETHERLANDS_D18J19/ Validation page] ||  
|| KNMI_JA16_ref[[BR]]KNMI_JA16_tg1[[BR]]KNMI_JA16_tg2  || Netherlands  ||16062000-16090100 || Toon (nl/nkc)[[BR]]John (nl/nll)[[BR]]Wim (nl/nli) || spinup included || [https://hirlam.org/portal/smhi/harmonie-43h21_validation/NETHERLANDS_JA16/ Validation page] || 
||AIBxl_43tg1cca [[BR]] AIBxl_43tg2cca ||Iberia||20180801-20180831||Samuel (es/sp3c)[[BR]] || Spin up 15 days (not included)  [[BR]] tg1,tg2: cca [[BR]] 40h111: nimbus,full DA,1 patch || '''COMPLETED''' [https://hirlam.org/portal/aemet/verif43tg1_tg2/summer_cca/ Validation page] [[BR]] [https://hirlam.org/trac/attachment/wiki/Meetings/Surface/Surface201911/Tg1_Tg2_validation_AEMET.pdf Score cards] [[BR]] [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/tg1tg2_global_pcpvalidation_Spain.pdf PCP global validation] ||  
||AIBxl_43tg1 [[BR]] AIBxl_43tg2 ||  [[BR]]   Iberia [[BR]] ||20181005-20181110|| Daniel || Spin up 15 days (not included)[[BR]]40h111:nimbus,full DA,1 patch [[BR]] tg1,tg2: nimbus || '''COMPLETED''' [https://hirlam.org/portal/aemet/verif43tg1_tg2/autumn_nimbus/ Validation page]  [[BR]] [https://hirlam.org/trac/attachment/wiki/Meetings/Surface/Surface201911/Tg1_Tg2_validation_AEMET.pdf Score cards] [[BR]] [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/tg1tg2_global_pcpvalidation_Spain.pdf PCP global validation]      ||
||AIBxl_43tg1cca[[BR]]AIBxl_43tg2cca ||Iberia||20181223-20190202||Samuel (es/sp3c)|| Spin up 15 days (not included)[[BR]] tg1,tg2: cca [[BR]] 40h111: nimbus,full DA,1 patch || '''COMPLETED''' [https://hirlam.org/portal/aemet/verif43tg1_tg2/winter_cca/ Validation page]  [[BR]] [https://hirlam.org/trac/attachment/wiki/Meetings/Surface/Surface201911/Tg1_Tg2_validation_AEMET.pdf Score cards] [[BR]] [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/tg1tg2_global_pcpvalidation_Spain.pdf PCP global validation] ||
||AIBxl_43tg1cca[[BR]]AIBxl_43tg2cca ||Iberia||20190315-20190430||Javier (es/mdk)|| Spin up 15 days (not included)[[BR]] tg1,tg2 (restarted): cca [[BR]] 40h111: nimbus,full DA,1 patch || '''COMPLETED''' [https://hirlam.org/portal/aemet/verif43tg1_tg2/spring_cca/ Validation page]  [[BR]] [https://hirlam.org/trac/attachment/wiki/Meetings/Surface/Surface201911/Tg1_Tg2_validation_AEMET.pdf Score cards] [[BR]] [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/tg1tg2_global_pcpvalidation_Spain.pdf PCP global validation] ||
|| 40h111_ref_autumn[[BR]]43tg1_autumn[[BR]]43tg2_autumn || METCOOP25B   ||18091500-18103118 || Åsmund B. (no/fab0) || spinup included || '''COMPLETED''' [https://hirlam.org/portal/smhi/harmonie-43h21_validation/METCOOP25B_autumn Validation page] ||
||40h111_ref_WINTER[[BR]]43tg1_WINTER[[BR]]43tg2_WINTER|| METCOOP25B   ||19011600-19022818 || Ole V. (no/fag) || spinup included || '''COMPLETED''' [https://hirlam.org/portal/smhi/harmonie-43h21_validation/METCOOP25B_winter Validation page] ||
||40h111_ref_spring[[BR]]43tg1_spring[[BR]] 43tg2_spring[[BR]] 43tg2_spring_as40 || METCOOP25B   ||19041500-19053118 || Patrick S. (se/sn8) || spinup included, MBX_SIZE=928000000 || '''COMPLETED''' [https://hirlam.org/portal/smhi/harmonie-43h21_validation/METCOOP25B_spring Validation page] ||
||40h111_ref_summer[[BR]]43tg1_summer[[BR]]43tg2_summer || METCOOP25B   ||19061500-19073118 || Ulf A. (se/snh) || spinup included, MBX_SIZE=928000000 || '''COMPLETED''' [https://hirlam.org/portal/smhi/harmonie-43h21_validation/METCOOP25B_summer Validation page] ||  
||40h111_IRL_Summer2019_rerun2[[BR]]43h2_target_1_Summer_2019_rerun[[BR]]43h2_target_2_Summer_2019_rerun3 ||      IRELAND25_090       ||       2019061500-2019080100          ||         Emily Gleeson (ie/dum)            ||       spinup included, , MBX_SIZE=928000000         || [https://hirlam.org/portal/smhi/harmonie-43h21_validation/IRELAND25_090_Summer2019/ Validation page]  || 
|| x           ||      -       ||       -          ||         -            ||       -         || - || 


 ==== Verification of long runs ====

We would like to see how the targets perform already during the spinup period. Thus, please use full forecast length also under the spinup period (i.e. do not ude the WARMUP_PERIOD option). Please make a montior validation after one week and report any peculiarities the management group.

'''For all monitor validations please use the latest version of monitor and a specific script, Env_exp_cy43h21_targets, dedicated for validation of targets'''. You find the latest version of monitor and the script in the git repository of monitor:
{{{
git clone https://git.hirlam.org/monitor
}}}

 ==== Modified target experiments ====

||= Experiment name =||= Reference  =||= Area specification =||= start to end time specification =||= Tester(country/$USER) =||=Additional , e.g. name list related =||= Verification link =|| 
||43tg1_winter_XRIMAXz0sn  || 43tg1_WINTER || METCOOP25B ||19020100-19021121 || Patrick (se/sn8) || XRIMAX=0.5[[BR]]N2M=2[[BR]]XZ0SN=0.013 ||  [https://hirlam.org/portal/smhi/cy43h21_tests/Test_surface_stable_layer_winter_XRIMAXz0sn/ Regions] ||
||  43tg2_winter_N2M || 43tg2_WINTER || METCOOP25B ||19020100-19020700 || Patrick (se/sn8) || XRIMAX=0.5[[BR]] Modified Ch shape [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Ch_in_43tg2_winter_N2M.png (see figure here)] [[BR]]N2M=2 and 3[[BR]]XZ0SN=0.013 || [https://hirlam.org/portal/smhi/cy43h21_tests/Test_surface_stable_N2M_export/ Verification link] ||
||  43tg2_winter_Cm_Ch || 43tg2_WINTER || METCOOP25B ||19020100-19020700 || Patrick (se/sn8) || XRIMAX=0.5[[BR]] Modified Cm and Ch shape [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Cm_Ch_in_43tg2_winter_N2M.png (see figure here)] [[BR]]N2M=3[[BR]]XZ0SN=0.013 || [https://hirlam.org/portal/smhi/cy43h21_tests/Test_surface_stable_N2M3_CmCh_export/ Verification link] ||
||  43tg2_winter_CERRA || 43tg2_WINTER || METCOOP25B ||19020100-19020700 || Patrick (se/sn8) || XRIMAX=0.5[[BR]] Modified Cm and Ch shape [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Cm_Ch_in_43tg2_winter_N2M.png (see figure here)] [[BR]]N2M=3[[BR]]XZ0SN=0.013[[BR]][https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/EBazile_GA2019_physics.pdf CERRA settings in slide 21 V3] || [https://hirlam.org/portal/smhi/cy43h21_tests/Test_surface_stable_CERRA_export/ Verification link] ||
||  43tg2_summer_stab || 43tg2_summer || METCOOP25B || 20190701-20190713 || Patrick (se/sn8) || XRIMAX=0.2[[BR]] Modified Ch shape [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Cm_Ch_in_43tg2_winter_N2M.png (see figure here)] [[BR]]N2M=3[[BR]]XZ0SN=0.013[[BR]]25% of orig. RSMIN increase || [https://hirlam.org/portal/smhi/cy43h21_tests/Test_surface_stable_summer_export/ Verification link] ||
|| cy43tg2_Dian_ISL2 || 43tg2 || ICELAND0 || 160220-160229 || Kristian (dk/nhp) || XRIMAX=0.2[[BR]] Modified Ch shape [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Cm_Ch_in_43tg2_winter_N2M.png (see figure here)] [[BR]]N2M=3 [[BR]]Blending || [https://hirlam.org/portal/smhi/cy43h21_tests/SBL_diag_ISL_201602_export/ Verification link] ||
||43tg1_orot  || 43tg1 || IBERIAxl_2.5 ||2018110300-2018112900 || Javier[[BR]] AEMET's HPC ||Orotur on (default settings)||  [https://hirlam.org/portal/aemet/verif43tg1_tg2/43tg1orotur_autumn/ Verification link] ||
||  43tg1_N2M3_RI02 || AIBxl_43tg1cca || IBERIAxl_2.5 ||2019010200-2019011500 [[BR]] (Stable period) || Samuel (es/sp3c) || XRIMAX=0.2[[BR]] N2M=3 || [https://hirlam.org/portal/aemet/verif43tg1_tg2/N2M3_RI02_Ch_export/ Verification link] ||
||  43tg1_N2M3_RI02_Ch || AIBxl_43tg1cca || IBERIAxl_2.5 ||2019010200-2019011500 [[BR]] (Stable period) || Samuel (es/sp3c) || XRIMAX=0.2[[BR]] Modified Ch shape [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Ch_in_43tg2_winter_N2M.png (see figure here)] [[BR]]N2M=3 || [https://hirlam.org/portal/aemet/verif43tg1_tg2/N2M3_RI02_Ch_export/ Verification link] ||

 === 2. Case studies  ===

||= Experiment name =||= Area specification =||= start to end time specification =||= Tester(s) =||=Additional , e.g. name list related =||= Verification link =||= Links to documentation of case (e.g. text) =||  
|| Deep-conv-2011-09-10        || Netherlands  || 2011091006 +24h || Sander Tijm ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/2011091006_Supercell_CY43.pptx 40-43 comparison] || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Case_20110910.pptx Case_20110910.pptx] ||
|| Open-cell-conv-2017-10-29   || Netherlands  || 2017102900 +48h || Sander Tijm ||       -       ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Case_20171029.pptx Case_20171029.pptx] ||
|| Supercooled-rain-2019-02-22 ||      -       ||      -      ||      -      ||       -       ||       -       ||        -       ||
|| Fog-2019-04-14              ||      -       ||      -      ||      -      ||       -       ||       -       ||        -       ||
|| Low-clouds-2018-12-19           || Netherlands  || 2018121812 +24h || Sander Tijm ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/2018121812_Lowclouds_CY43.2.pptx 40-43 comparison] ||     -       ||
|| Fog-2019-03-28/29           || Netherlands  || 2019032812 +48h || Sander Tijm ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/2019032812_FOG_CY43.pptx 40-43 comparison] || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Case_20190329.pptx Case_20190329.pptx] ||
|| Fog-2018-12-15              ||      -       ||     -      ||      -      ||    -  ||       -       ||        -       ||
|| AIBxl_43tg1cca & AIBxl_43tg2cca    ||    Iberia    ||201808 (selected days)      ||      -      ||Summer convection  ||       -       ||        [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/tg1tg2summer_convection_cases.pdf Report]       ||
||                             ||    Iberia    ||20181014      -      ||      -      ||Leslie Cyclone     ||       -       ||        -       ||
||                             ||    Iberia    ||20181205      -      ||      -      ||Shallow Convection ||        -       ||
||                             ||   Iberian North Plateau||201901,13-15 ||    Gema   ||Land Fog      ||       -       ||        -       ||
||                             ||  Biscay Gulf ||201902,24-26||              Gema    ||Cantabric Sea Fog  ||        -       ||  ||




=== 3. Tests with Ensemble setups  ===
Many short test have been run, or are under way, to test if the perturbations work as expected. Tested so far and found OK: PertAna, nesting in ENS or SLAF, surface perturbations. Run but needs evaluation: EDA. Problems: SPPT (under investigation). Not tested: SPP (works technically). See https://docs.google.com/presentation/d/12gFbAbHI8puNda072TsIldkuhcewQSjjmb10260oCWs/edit?usp=sharing for more details. The full runs will be included in the list below when started.

||= Experiment name =||= Area specification =||= start to end time specification =||= Tester(s) =||=Additional , e.g. name list related =||= Verification link =|| 
|| z1         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| z2         ||      -       ||      -      ||      -      ||       -       ||       -       || 
|| z3         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| z4         ||      -       ||      -      ||      -      ||       -       ||       -       || 
|| z5         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| z6         ||      -       ||      -      ||      -      ||       -       ||       -       || 
|| z7         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| z8         ||      -       ||      -      ||      -      ||       -       ||       -       ||
|| z9         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| z10        ||      -       ||      -      ||      -      ||       -       ||       -       ||

 === 4. Data-assimilation tests ===

||= Experiment name =||= Area specification =||= start to end time specification =||= Tester(s) =||=Additional , e.g. name list related =||= Verification link =|| 
|| u1         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| u2         ||      -       ||      -      ||      -      ||       -       ||       -       || 
|| u3         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| u4         ||      -       ||      -      ||      -      ||       -       ||       -       || 
|| u5         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| u6         ||      -       ||      -      ||      -      ||       -       ||       -       || 
|| u7         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| u8         ||      -       ||      -      ||      -      ||       -       ||       -       || 
|| u9         ||      -       ||      -      ||      -      ||       -       ||       -       ||  
|| u10        ||      -       ||      -      ||      -      ||       -       ||       -       || 


[[BR]]

= CY43h2.1  Pre-Release tests May-June 2020 =

The Tables below will contain relevant information defining the individual experiments and case studies and their results for the approved Target 1 (1 May 2020) and the comparisons to CY40h1.1.1 or similar. The precise selection of experiments and case studies will be decided on by 1 May 2020 :


=== 5.1 Long runs with forecast model ===

The verification presented in this table is constructed by the setup under ecgb:/scratch/ms/spsehlam/hlam/monitor_cy43_validation. The master script for running through all experiments is scr/Startme.

[[BR]]We would like to see how the targets perform already during the spinup period. Thus, please use full forecast length also under the spinup period (i.e. do not ude the WARMUP_PERIOD option). Please make a montior validation after one week and report any peculiarities the management group.

'''For all monitor validations please use the latest version of monitor and a specific script, Env_exp_cy43h21_targets, dedicated for validation of targets'''. You find the latest version of monitor and the script in the git repository of monitor:
{{{
git clone https://git.hirlam.org/monitor
}}}

||= Experiment name =||= Area specification =||= start to end time specification =||= Tester(country/$USER) =||=Additional , e.g. name list related =||= Verification link =|| 
|| DKA_SEP18_40h111[[BR]]DKA_SEP18_43h2tgt1[[BR]]DKA_SEP18_43h2tgt2   ||      DKA     ||18081400-18093000 || Kai Sattler (dk/nhk) || spinup included || - ||  
|| DKA-DEC18   ||      DKA     ||18111400-18123100 || Kai Sattler (dk/nhk) || spinup included ||       -       || 
|| DKA-MAR19   ||      DKA     ||19021400-19033100 || Kai Sattler (dk/nhk) || spinup included ||       -       ||  
|| DKA-JUN19   ||      DKA     ||19051400-19063000 || Kai Sattler (dk/nhk) || spinup included ||       -       || 
|| KNMI_D18J19_ref[[BR]]KNMI_D18J19_tg1[[BR]]KNMI_D18J19_tg2 || Netherlands  ||18112000-19020100 || Toon (nl/nkc)[[BR]]John (nl/nll)[[BR]]Wim (nl/nli) || spinup included || - ||  
|| KNMI_JA16_ref[[BR]]KNMI_JA16_tg1[[BR]]KNMI_JA16_tg2  || Netherlands  ||16062000-16090100 || Toon (nl/nkc)[[BR]]John (nl/nll)[[BR]]Wim (nl/nli) || spinup included || - || 
||AIBxl_43tg1cca [[BR]] AIBxl_43tg2cca ||Iberia||20180801-20180831||Samuel (es/sp3c)[[BR]] || Spin up 15 days (not included)  [[BR]] tg1,tg2: cca [[BR]] 40h111: nimbus,full DA,1 patch ||  [[BR]]  [[BR]]  ||  
||AIBxl_43tg1 [[BR]] AIBxl_43tg2 ||  [[BR]]   Iberia [[BR]] ||20181005-20181110|| Daniel || Spin up 15 days (not included)[[BR]]40h111:nimbus,full DA,1 patch [[BR]] tg1,tg2: nimbus ||    [[BR]]  [[BR]]       ||
||AIBxl_43tg1cca[[BR]]AIBxl_43tg2cca ||Iberia||20181223-20190202||Samuel (es/sp3c)|| Spin up 15 days (not included)[[BR]] tg1,tg2: cca [[BR]] 40h111: nimbus,full DA,1 patch ||   [[BR]]  [[BR]]  ||
||AIBxl_43tg1cca[[BR]]AIBxl_43tg2cca ||Iberia||20190315-20190430||Javier (es/mdk)|| Spin up 15 days (not included)[[BR]] tg1,tg2 (restarted): cca [[BR]] 40h111: nimbus,full DA,1 patch ||    [[BR]]  [[BR]]  ||
|| 40h111_ref_autumn[[BR]]43tg1_autumn[[BR]]43tg2_autumn || METCOOP25B   ||18091500-18103118 || Åsmund B. (no/fab0) || spinup included ||  - ||
||40h111_ref_WINTER[[BR]]43tg1_WINTER[[BR]]43tg2_WINTER|| METCOOP25B   ||19011600-19022818 || Ole V. (no/fag) || spinup included || - ||
||40h111_ref_spring[[BR]]43tg1_spring[[BR]] 43tg2_spring[[BR]] 43tg2_spring_as40 || METCOOP25B   ||19041500-19053118 || Patrick S. (se/sn8) || spinup included, MBX_SIZE=928000000 || - ||
||40h111_ref_summer[[BR]]43tg1_summer[[BR]]43tg2_summer || METCOOP25B   ||19061500-19073118 || Ulf A. (se/snh) || spinup included, MBX_SIZE=928000000 || - ||  
||40h111_IRL_Summer2019_rerun2[[BR]]43h2_target_1_Summer_2019_rerun[[BR]]43h2_target_2_Summer_2019_rerun3 ||      IRELAND25_090       ||       2019061500-2019080100          ||         Emily Gleeson (ie/dum)            ||       spinup included, , MBX_SIZE=928000000         || -  || 
|| x           ||      -       ||       -          ||         -            ||       -         || - || 




 === 5.2  Case studies  ===

||= Experiment name =||= Area specification =||= start to end time specification =||= Tester(s) =||=Additional , e.g. name list related =||= Verification link =||= Links to documentation of case (e.g. text) =||  
|| Deep-conv-2011-09-10        || Netherlands  || 2011091006 +24h || Sander Tijm ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/2011091006_Supercell_CY43.pptx 40-43 comparison] || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Case_20110910.pptx Case_20110910.pptx] ||
|| Open-cell-conv-2017-10-29   || Netherlands  || 2017102900 +48h || Sander Tijm ||       -       ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Case_20171029.pptx Case_20171029.pptx] ||
|| Supercooled-rain-2019-02-22 ||      -       ||      -      ||      -      ||       -       ||       -       ||        -       ||
|| Fog-2019-04-14              ||      -       ||      -      ||      -      ||       -       ||       -       ||        -       ||
|| Low-clouds-2018-12-19           || Netherlands  || 2018121812 +24h || Sander Tijm ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/2018121812_Lowclouds_CY43.2.pptx 40-43 comparison] ||     -       ||
|| Fog-2019-03-28/29           || Netherlands  || 2019032812 +48h || Sander Tijm ||       -       || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/2019032812_FOG_CY43.pptx 40-43 comparison] || [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/Case_20190329.pptx Case_20190329.pptx] ||
|| Fog-2018-12-15              ||      -       ||     -      ||      -      ||    -  ||       -       ||        -       ||
|| AIBxl_43tg1cca & AIBxl_43tg2cca    ||    Iberia    ||201808 (selected days)      ||      -      ||Summer convection  ||       -       ||        [https://hirlam.org/trac/attachment/wiki/Harmonie_43h2/Validation_for_tagging_43h2.1/tg1tg2summer_convection_cases.pdf Report]       ||
||                             ||    Iberia    ||20181014      -      ||      -      ||Leslie Cyclone     ||       -       ||        -       ||
||                             ||    Iberia    ||20181205      -      ||      -      ||Shallow Convection ||        -       ||
||                             ||   Iberian North Plateau||201901,13-15 ||    Gema   ||Land Fog      ||       -       ||        -       ||
||                             ||  Biscay Gulf ||201902,24-26||              Gema    ||Cantabric Sea Fog  ||        -       ||  ||









 === 6. Scaling on cca ===
The default cy43 configuration on the ECMWF uses 16x16+2 (nprocx x nprocy + nproc_io) cores. This is around 7.2 nodes, so it doesn't use all allocated cores. To search for a more optimal solution a set of runs with different combinations of nprocx, nprocy and nproc_io was done on the cca.

Some settings:
||version  ||/home/ms/spsehlam/hlam/harmonie_release/git/branches/harmonie-43h2.1.target.2 (3c619ce5a8bc5efc238bd822f6f694eced1977a4) ||
||platform ||ECMWF ecgb/cca ||
||domain   ||NETHERLANDS (800x800@75s) ||
||DTG      ||2018112000 (cold start) ||
||LL       ||12 ||
||NPROMA   ||-30 ||
||MBX_SIZE ||increased to 928000000 in harmonie_namelists.pm ||

The table below shows the configurations tested for task Forecast and the results as derived from the epilogue of task Forecast for logfile HM_Date_2018112000.html. Note that results are from a single run per configuration.
||= name  =||= nprocx =||= nprocy =||= nproc_io =||= nproc =||= nnodes =||= x/y ratio =||= elapsed (s) =||= queued (s) =||= SBU =||= cores factor =||= nodes factor =||= speed up =||= SBU factor =||
||16x16+2  ||        16||        16||           2||      258||	    7.17||         1.00||           1902||           234||   2761||            1.00||            1.00||        1.00||          1.00||
||15x19+3  ||        15||        19||           3||      288||	    8.00||         0.79||           1731||            72||   2513||            1.12||            1.00||        1.10||          0.91||
||16x20+4  ||        16||        20||           4||      324||	    9.00||         0.80||           1533||            52||   2473||            1.26||            1.13||        1.24||          0.90||
||17x21+3  ||        17||        21||           3||      360||	   10.00||         0.81||           1364||           153||   2420||            1.40||            1.25||        1.39||          0.88||
||20x25+4  ||        20||        25||           4||      504||	   14.00||         0.80||           1024||            37||   2478||            1.95||            1.75||        1.86||          0.90||
||22x26+4  ||        22||        26||           4||      576||	   16.00||         0.85||            932||            39||   2556||            2.23||            2.00||        2.04||          0.93||
||26x26+8  ||        26||        26||           8||      684||	   19.00||         1.00||            816||            24||   2632||            2.65||            2.38||        2.33||          0.95||
||26x29+2  ||        26||        29||           2||      756||	   21.00||         0.90||            775||            34||   2750||            2.93||            2.63||        2.45||          1.00||
||25x30+6  ||        25||        30||           6||      756||	   21.00||         0.83||            757||            59||   2686||            2.93||            2.63||        2.51||          0.97||
||28x32+4  ||        28||        32||           4||      900||	   25.00||         0.88||            656||           173||   2751||            3.49||            3.13||        2.90||          1.00||

Up to 25 nodes (max tested) the elapsed time decreases. Although saturation starts to show if more than 14 nodes are used, the amount of SBUs remains less or similar to the default 16x16+2 configuration. In the graphs below the main results of the scaling exercise can be seen.[[BR]]
[[Image(cy43_cca_scaling_results.png)]][[Image(cy43_cca_scaling_saturation.png)]][[BR]]
Two configurations were run on 21 nodes: 26x29+2 and 25x30+6. The latter one is slightly faster, while it uses less cores for calculations. This may indicate 2 IO cores is too few when using many nodes, but it may also be down to chance. This will also greatly depend on the requested output and system IO-performance.[[BR]]
Queueing times don't seem to increase, though most runs were done over the weekend.[[BR]]
The ICMSHHARM+0012 and ICMSHSELE+0012.sfx files of the all the runs were compared against those of the default 16x16+2 set up with xtool_grib_api and for all tested configurations the results were identical, i.e. xtool_grib_api reported no differences.[[BR]]
So, the Forecast task can be run a 2.9x faster, perhaps even more, without using more SBUs or affecting model results. Perhaps ECMWF will start to complain if everybody starts using 25 nodes for the Forecast, but using 10 nodes (17x21+3) seems a more optimal default than 16x16+2.
  



[[FootNote]] 